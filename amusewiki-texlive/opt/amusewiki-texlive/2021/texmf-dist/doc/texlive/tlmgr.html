<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>tlmgr - the native TeX Live Manager</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:karl@tug.org" />
</head>

<body>



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#EXAMPLES">EXAMPLES</a></li>
  <li><a href="#OPTIONS">OPTIONS</a></li>
  <li><a href="#ACTIONS">ACTIONS</a>
    <ul>
      <li><a href="#help">help</a></li>
      <li><a href="#version">version</a></li>
      <li><a href="#backup">backup</a></li>
      <li><a href="#candidates-pkg">candidates pkg</a></li>
      <li><a href="#check-option...-depends-executes-files-runfiles-texmfdbs-all">check [option...] [depends|executes|files|runfiles|texmfdbs|all]</a></li>
      <li><a href="#conf">conf</a></li>
      <li><a href="#dump-tlpdb-option...---json">dump-tlpdb [option...] [--json]</a></li>
      <li><a href="#generate">generate</a></li>
      <li><a href="#gui">gui</a></li>
      <li><a href="#info">info</a></li>
      <li><a href="#init-usertree">init-usertree</a></li>
      <li><a href="#install-option...-pkg">install [option...] pkg...</a></li>
      <li><a href="#key">key</a></li>
      <li><a href="#list1">list</a></li>
      <li><a href="#option">option</a></li>
      <li><a href="#paper">paper</a></li>
      <li><a href="#path">path</a></li>
      <li><a href="#pinning">pinning</a></li>
      <li><a href="#platform">platform</a></li>
      <li><a href="#postaction">postaction</a></li>
      <li><a href="#print-platform">print-platform</a></li>
      <li><a href="#print-platform-info">print-platform-info</a></li>
      <li><a href="#remove-option...-pkg">remove [option...] pkg...</a></li>
      <li><a href="#repository">repository</a></li>
      <li><a href="#restore">restore</a></li>
      <li><a href="#search">search</a></li>
      <li><a href="#shell">shell</a></li>
      <li><a href="#show">show</a></li>
      <li><a href="#uninstall">uninstall</a></li>
      <li><a href="#update-option...-pkg">update [option...] [pkg...]</a></li>
    </ul>
  </li>
  <li><a href="#CONFIGURATION-FILE-FOR-TLMGR">CONFIGURATION FILE FOR TLMGR</a></li>
  <li><a href="#CRYPTOGRAPHIC-VERIFICATION">CRYPTOGRAPHIC VERIFICATION</a>
    <ul>
      <li><a href="#Configuration-of-GnuPG-invocation">Configuration of GnuPG invocation</a></li>
    </ul>
  </li>
  <li><a href="#USER-MODE">USER MODE</a>
    <ul>
      <li><a href="#User-mode-install">User mode install</a></li>
      <li><a href="#User-mode-backup-restore-remove-update">User mode backup, restore, remove, update</a></li>
      <li><a href="#User-mode-generate-option-paper">User mode generate, option, paper</a></li>
    </ul>
  </li>
  <li><a href="#MULTIPLE-REPOSITORIES">MULTIPLE REPOSITORIES</a>
    <ul>
      <li><a href="#Pinning">Pinning</a></li>
    </ul>
  </li>
  <li><a href="#GUI-FOR-TLMGR">GUI FOR TLMGR</a>
    <ul>
      <li><a href="#Main-display">Main display</a>
        <ul>
          <li><a href="#Display-configuration-area">Display configuration area</a></li>
          <li><a href="#Package-list-area">Package list area</a></li>
          <li><a href="#Main-display-action-buttons">Main display action buttons</a></li>
        </ul>
      </li>
      <li><a href="#Menu-bar">Menu bar</a></li>
      <li><a href="#GUI-options">GUI options</a></li>
    </ul>
  </li>
  <li><a href="#MACHINE-READABLE-OUTPUT">MACHINE-READABLE OUTPUT</a>
    <ul>
      <li><a href="#Machine-readable-update-and-install-output">Machine-readable update and install output</a></li>
      <li><a href="#Machine-readable-option-output">Machine-readable option output</a></li>
    </ul>
  </li>
  <li><a href="#ENVIRONMENT-VARIABLES">ENVIRONMENT VARIABLES</a></li>
  <li><a href="#AUTHORS-AND-COPYRIGHT">AUTHORS AND COPYRIGHT</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>tlmgr - the native TeX Live Manager</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<p>tlmgr [<i>option</i>...] <i>action</i> [<i>option</i>...] [<i>operand</i>...]</p>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p><b>tlmgr</b> manages an existing TeX Live installation, both packages and configuration options. For information on initially downloading and installing TeX Live, see <a href="https://tug.org/texlive/acquire.html">https://tug.org/texlive/acquire.html</a>.</p>

<p>The most up-to-date version of this documentation (updated nightly from the development sources) is available at <a href="https://tug.org/texlive/tlmgr.html">https://tug.org/texlive/tlmgr.html</a>, along with procedures for updating <code>tlmgr</code> itself and information about test versions.</p>

<p>TeX Live is organized into a few top-level <i>schemes</i>, each of which is specified as a different set of <i>collections</i> and <i>packages</i>, where a collection is a set of packages, and a package is what contains actual files. Schemes typically contain a mix of collections and packages, but each package is included in exactly one collection, no more and no less. A TeX Live installation can be customized and managed at any level.</p>

<p>See <a href="https://tug.org/texlive/doc">https://tug.org/texlive/doc</a> for all the TeX Live documentation available.</p>

<h1 id="EXAMPLES">EXAMPLES</h1>

<p>After successfully installing TeX Live, here are a few common operations with <code>tlmgr</code>:</p>

<dl>

<dt id="tlmgr-option-repository-ctan"><code>tlmgr option repository ctan</code></dt>
<dd>

</dd>
<dt id="tlmgr-option-repository-https:-mirror.ctan.org-systems-texlive-tlnet"><code>tlmgr option repository https://mirror.ctan.org/systems/texlive/tlnet</code></dt>
<dd>

<p>Tell <code>tlmgr</code> to use a nearby CTAN mirror for future updates; useful if you installed TeX Live from the DVD image and want to have continuing updates. The two commands are equivalent; <code>ctan</code> is just an alias for the given url.</p>

<p>Caveat: <code>mirror.ctan.org</code> resolves to many different hosts, and they are not perfectly synchronized; we recommend updating only daily (at most), and not more often. You can choose a particular mirror if problems; the list of all CTAN mirrors with the status of each is at <a href="https://ctan.org/mirrors/mirmon">https://ctan.org/mirrors/mirmon</a>.</p>

</dd>
<dt id="tlmgr-update---list"><code>tlmgr update --list</code></dt>
<dd>

<p>Report what would be updated without actually updating anything.</p>

</dd>
<dt id="tlmgr-update---all"><code>tlmgr update --all</code></dt>
<dd>

<p>Make your local TeX installation correspond to what is in the package repository (typically useful when updating from CTAN).</p>

</dd>
<dt id="tlmgr-info-what"><code>tlmgr info</code> <i>what</i></dt>
<dd>

<p>Display detailed information about a package <i>what</i>, such as the installation status and description, of searches for <i>what</i> in all packages.</p>

</dd>
</dl>

<p>For all the capabilities and details of <code>tlmgr</code>, please read the following voluminous information.</p>

<h1 id="OPTIONS">OPTIONS</h1>

<p>The following options to <code>tlmgr</code> are global options, not specific to any action. All options, whether global or action-specific, can be given anywhere on the command line, and in any order. The first non-option argument will be the main action. In all cases, <code>--</code><i>option</i> and <code>-</code><i>option</i> are equivalent, and an <code>=</code> is optional between an option name and its value.</p>

<dl>

<dt id="repository-url-path"><b>--repository</b> <i>url|path</i></dt>
<dd>

<p>Specify the package repository from which packages should be installed or updated, either a local directory or network location, as below. This overridesthe default package repository found in the installation&#39;s TeX Live Package Database (a.k.a. the TLPDB, which is given entirely in the file <code>tlpkg/texlive.tlpdb</code>).</p>

<p>This <code>--repository</code> option changes the location only for the current run; to make a permanent change, use <code>option repository</code> (see the <a href="#option">&quot;option&quot;</a> action).</p>

<p>As an example, you can choose a particular CTAN mirror with something like this:</p>

<pre><code>-repository http://ctan.example.org/its/ctan/dir/systems/texlive/tlnet</code></pre>

<p>Of course a real hostname and its particular top-level CTAN directory have to be specified. The list of CTAN mirrors is available at <a href="https://ctan.org/mirrors/mirmon">https://ctan.org/mirrors/mirmon</a>.</p>

<p>Here&#39;s an example of using a local directory:</p>

<pre><code>-repository /local/TL/repository</code></pre>

<p>For backward compatibility and convenience, <code>--location</code> and <code>--repo</code> are accepted as aliases for this option.</p>

<p>Locations can be specified as any of the following:</p>

<dl>

<dt id="some-local-dir"><code>/some/local/dir</code></dt>
<dd>

</dd>
<dt id="file:-some-local-dir"><code>file:/some/local/dir</code></dt>
<dd>

<p>Equivalent ways of specifying a local directory.</p>

</dd>
<dt id="ctan"><code>ctan</code></dt>
<dd>

</dd>
<dt id="https:-mirror.ctan.org-systems-texlive-tlnet"><code>https://mirror.ctan.org/systems/texlive/tlnet</code></dt>
<dd>

<p>Pick a CTAN mirror automatically, trying for one that is both nearby and up-to-date. The chosen mirror is used for the entire download. The bare <code>ctan</code> is merely an alias for the full url. (See <a href="https://ctan.org">https://ctan.org</a> for more about CTAN and its mirrors.)</p>

</dd>
<dt id="http:-server-path-to-tlnet"><code>http://server/path/to/tlnet</code></dt>
<dd>

<p>Standard HTTP. If the (default) LWP method is used, persistent connections are supported. TL can also use <code>curl</code> or <code>wget</code> to do the downloads, or an arbitrary user-specified program, as described in the <code>tlmgr</code> documentation (<a href="https://tug.org/texlive/doc/tlmgr.html#ENVIRONMENT-VARIABLES">https://tug.org/texlive/doc/tlmgr.html#ENVIRONMENT-VARIABLES</a>).</p>

</dd>
<dt id="https:-server-path-to-tlnet"><code>https://server/path/to/tlnet</code></dt>
<dd>

<p>Again, if the (default) LWP method is used, this supports persistent connections. Unfortunately, some versions of <code>wget</code> and <code>curl</code> do not support https, and even when <code>wget</code> supports https, certificates may be rejected even when the certificate is fine, due to a lack of local certificate roots. The simplest workaround for this problem is to use http or ftp.</p>

</dd>
<dt id="ftp:-server-path-to-tlnet"><code>ftp://server/path/to/tlnet</code></dt>
<dd>

<p>If the (default) LWP method is used, persistent connections are supported.</p>

</dd>
<dt id="user-machine:-path-to-tlnet"><code>user@machine:/path/to/tlnet</code></dt>
<dd>

</dd>
<dt id="scp:-user-machine-path-to-tlnet"><code>scp://user@machine/path/to/tlnet</code></dt>
<dd>

</dd>
<dt id="ssh:-user-machine-path-to-tlnet"><code>ssh://user@machine/path/to/tlnet</code></dt>
<dd>

<p>These forms are equivalent; they all use <code>scp</code> to transfer files. Using <code>ssh-agent</code> is recommended. (Info: <a href="https://en.wikipedia.org/wiki/OpenSSH">https://en.wikipedia.org/wiki/OpenSSH</a>, <a href="https://en.wikipedia.org/wiki/Ssh-agent">https://en.wikipedia.org/wiki/Ssh-agent</a>.)</p>

</dd>
</dl>

<p>If the repository is on the network, trailing <code>/</code> characters and/or trailing <code>/tlpkg</code> and/or <code>/archive</code> components are ignored.</p>

</dd>
<dt id="gui-action"><b>--gui</b> [<i>action</i>]</dt>
<dd>

<p>Two notable GUI front-ends for <code>tlmgr</code>, <code>tlshell</code> and <code>tlcockpit</code>, are started up as separate programs; see their own documentation.</p>

<p><code>tlmgr</code> itself has a graphical interface as well as the command line interface. You can give the option to invoke it, <code>--gui</code>, together with an action to be brought directly into the respective screen of the GUI. For example, running</p>

<pre><code>tlmgr --gui update</code></pre>

<p>starts you directly at the update screen. If no action is given, the GUI will be started at the main screen. See <a href="#GUI-FOR-TLMGR">&quot;GUI FOR TLMGR&quot;</a>.</p>

<p>However, the native GUI requires Perl/TK, which is no longer included in TeX Live&#39;s Perl distribution for Windows. You may find <code>tlshell</code> or <code>tlcockpit</code> easier to work with.</p>

</dd>
<dt id="gui-lang-llcode"><b>--gui-lang</b> <i>llcode</i></dt>
<dd>

<p>By default, the GUI tries to deduce your language from the environment (on Windows via the registry, on Unix via <code>LC_MESSAGES</code>). If that fails you can select a different language by giving this option with a language code (based on ISO 639-1). Currently supported (but not necessarily completely translated) are: <span style="white-space: nowrap;">English (en, default)</span>, <span style="white-space: nowrap;">Czech (cs)</span>, <span style="white-space: nowrap;">German (de)</span>, <span style="white-space: nowrap;">French (fr)</span>, <span style="white-space: nowrap;">Italian (it)</span>, <span style="white-space: nowrap;">Japanese (ja)</span>, <span style="white-space: nowrap;">Dutch (nl)</span>, <span style="white-space: nowrap;">Polish (pl)</span>, <span style="white-space: nowrap;">Brazilian Portuguese (pt_BR)</span>, <span style="white-space: nowrap;">Russian (ru)</span>, <span style="white-space: nowrap;">Slovak (sk)</span>, <span style="white-space: nowrap;">Slovenian (sl)</span>, <span style="white-space: nowrap;">Serbian (sr)</span>, <span style="white-space: nowrap;">Ukrainian (uk)</span>, <span style="white-space: nowrap;">Vietnamese (vi)</span>, <span style="white-space: nowrap;">simplified Chinese (zh_CN)</span>, and <span style="white-space: nowrap;">traditional Chinese (zh_TW)</span>.</p>

<p>tlshell shares its message catalog with tlmgr.</p>

</dd>
<dt id="command-logfile-file"><b>--command-logfile</b> <i>file</i></dt>
<dd>

<p><code>tlmgr</code> logs the output of all programs invoked (mktexlr, mtxrun, fmtutil, updmap) to a separate log file, by default <code>TEXMFSYSVAR/web2c/tlmgr-commands.log</code>. This option allows you to specify a different file for the log.</p>

</dd>
<dt id="debug-translation"><b>--debug-translation</b></dt>
<dd>

<p>In GUI mode, this switch tells <code>tlmgr</code> to report any untranslated (or missing) messages to standard error. This can help translators to see what remains to be done.</p>

</dd>
<dt id="machine-readable"><b>--machine-readable</b></dt>
<dd>

<p>Instead of the normal output intended for human consumption, write (to standard output) a fixed format more suitable for machine parsing. See the <a href="#MACHINE-READABLE-OUTPUT">&quot;MACHINE-READABLE OUTPUT&quot;</a> section below.</p>

</dd>
<dt id="no-execute-actions"><b>--no-execute-actions</b></dt>
<dd>

<p>Suppress the execution of the execute actions as defined in the tlpsrc files. Documented only for completeness, as this is only useful in debugging.</p>

</dd>
<dt id="package-logfile-file"><b>--package-logfile</b> <i>file</i></dt>
<dd>

<p><code>tlmgr</code> logs all package actions (install, remove, update, failed updates, failed restores) to a separate log file, by default <code>TEXMFSYSVAR/web2c/tlmgr.log</code>. This option allows you to specify a different file for the log.</p>

</dd>
<dt id="pause"><b>--pause</b></dt>
<dd>

<p>This option makes <code>tlmgr</code> wait for user input before exiting. Useful on Windows to avoid disappearing command windows.</p>

</dd>
<dt id="persistent-downloads"><b>--persistent-downloads</b></dt>
<dd>

</dd>
<dt id="no-persistent-downloads"><b>--no-persistent-downloads</b></dt>
<dd>

<p>For network-based installations, this option (on by default) makes <code>tlmgr</code> try to set up a persistent connection (using the <code>LWP</code> Perl module). The idea is to open and reuse only one connection per session between your computer and the server, instead of initiating a new download for each package.</p>

<p>If this is not possible, <code>tlmgr</code> will fall back to using <code>wget</code>. To disable these persistent connections, use <code>--no-persistent-downloads</code>.</p>

</dd>
<dt id="pin-file"><b>--pin-file</b></dt>
<dd>

<p>Change the pinning file location from <code>TEXMFLOCAL/tlpkg/pinning.txt</code> (see <a href="#Pinning">&quot;Pinning&quot;</a> below). Documented only for completeness, as this is only useful in debugging.</p>

</dd>
<dt id="usermode"><b>--usermode</b></dt>
<dd>

<p>Activates user mode for this run of <code>tlmgr</code>; see <a href="#USER-MODE">&quot;USER MODE&quot;</a> below.</p>

</dd>
<dt id="usertree-dir"><b>--usertree</b> <i>dir</i></dt>
<dd>

<p>Uses <i>dir</i> for the tree in user mode; see <a href="#USER-MODE">&quot;USER MODE&quot;</a> below.</p>

</dd>
<dt id="verify-repo-none-main-all"><b>--verify-repo=[none|main|all]</b></dt>
<dd>

<p>Defines the level of verification done: If <code>none</code> is specified, no verification whatsoever is done. If <code>main</code> is given and a working GnuPG (<code>gpg</code>) binary is available, all repositories are checked, but only the main repository is required to be signed. If <code>all</code> is given, then all repositories need to be signed. See <a href="#CRYPTOGRAPHIC-VERIFICATION">&quot;CRYPTOGRAPHIC VERIFICATION&quot;</a> below for details.</p>

</dd>
</dl>

<p>The standard options for TeX Live programs are also accepted: <code>--help/-h/-?</code>, <code>--version</code>, <code>-q</code> (no informational messages), <code>-v</code> (debugging messages, can be repeated). For the details about these, see the <code>TeXLive::TLUtils</code> documentation.</p>

<p>The <code>--version</code> option shows version information about the TeX Live release and about the <code>tlmgr</code> script itself. If <code>-v</code> is also given, revision number for the loaded TeX Live Perl modules are shown, too.</p>

<h1 id="ACTIONS">ACTIONS</h1>

<h2 id="help">help</h2>

<p>Display this help information and exit (same as <code>--help</code>, and on the web at <a href="https://tug.org/texlive/doc/tlmgr.html">https://tug.org/texlive/doc/tlmgr.html</a>). Sometimes the <code>perldoc</code> and/or <code>PAGER</code> programs on the system have problems, resulting in control characters being literally output. This can&#39;t always be detected, but you can set the <code>NOPERLDOC</code> environment variable and <code>perldoc</code> will not be used.</p>

<h2 id="version">version</h2>

<p>Gives version information (same as <code>--version</code>).</p>

<p>If <code>-v</code> has been given the revisions of the used modules are reported, too.</p>

<h2 id="backup">backup</h2>

<dl>

<dt id="backup-option...---all"><b>backup [<i>option</i>...] --all</b></dt>
<dd>

</dd>
<dt id="backup-option...-pkg"><b>backup [<i>option</i>...] <i>pkg</i>...</b></dt>
<dd>

<p>If the <code>--clean</code> option is not specified, this action makes a backup of the given packages, or all packages given <code>--all</code>. These backups are saved to the value of the <code>--backupdir</code> option, if that is an existing and writable directory. If <code>--backupdir</code> is not given, the <code>backupdir</code> option setting in the TLPDB is used, if present. If both are missing, no backups are made. (The installer sets <code>backupdir</code> to <code>.../tlpkg/backups</code>, under the TL root installation directory, so it is usually defined; see the <a href="#option">&quot;option&quot;</a> description for more information.)</p>

<p>If the <code>--clean</code> option is specified, backups are pruned (removed) instead of saved. The optional integer value <i>N</i> may be specified to set the number of backups that will be retained when cleaning. If <code>N</code> is not given, the value of the <code>autobackup</code> option is used. If both are missing, an error is issued. For more details of backup pruning, see the <code>option</code> action.</p>

<p>Options:</p>

<dl>

<dt id="backupdir-directory"><b>--backupdir</b> <i>directory</i></dt>
<dd>

<p>Overrides the <code>backupdir</code> option setting in the TLPDB. The <i>directory</i> argument is required and must specify an existing, writable directory where backups are to be placed.</p>

</dd>
<dt id="all"><b>--all</b></dt>
<dd>

<p>If <code>--clean</code> is not specified, make a backup of all packages in the TeX Live installation; this will take quite a lot of space and time. If <code>--clean</code> is specified, all packages are pruned.</p>

</dd>
<dt id="clean-N"><b>--clean</b>[=<i>N</i>]</dt>
<dd>

<p>Instead of making backups, prune the backup directory of old backups, as explained above. The optional integer argument <i>N</i> overrides the <code>autobackup</code> option set in the TLPDB. You must use <code>--all</code> or a list of packages together with this option, as desired.</p>

</dd>
<dt id="dry-run"><b>--dry-run</b></dt>
<dd>

<p>Nothing is actually backed up or removed; instead, the actions to be performed are written to the terminal.</p>

</dd>
</dl>

</dd>
</dl>

<h2 id="candidates-pkg">candidates <i>pkg</i></h2>

<p>Shows the available candidate repositories for package <i>pkg</i>. See <a href="#MULTIPLE-REPOSITORIES">&quot;MULTIPLE REPOSITORIES&quot;</a> below.</p>

<h2 id="check-option...-depends-executes-files-runfiles-texmfdbs-all">check [<i>option</i>...] [depends|executes|files|runfiles|texmfdbs|all]</h2>

<p>Execute one (or all) check(s) of the consistency of the installation. If no problems are found, there will be no output. (To get a view of what is being done, run <code>tlmgr -v check</code>.)</p>

<dl>

<dt id="depends"><b>depends</b></dt>
<dd>

<p>Lists those packages which occur as dependencies in an installed collection, but are themselves not installed, and those packages which are not contained in any collection.</p>

<p>If you call <code>tlmgr check collections</code> this test will be carried out instead since former versions for <code>tlmgr</code> called it that way.</p>

</dd>
<dt id="executes"><b>executes</b></dt>
<dd>

<p>Check that the files referred to by <code>execute</code> directives in the TeX Live Database are present.</p>

</dd>
<dt id="files"><b>files</b></dt>
<dd>

<p>Checks that all files listed in the local TLPDB (<code>texlive.tlpdb</code>) are actually present, and lists those missing.</p>

</dd>
<dt id="runfiles"><b>runfiles</b></dt>
<dd>

<p>List those filenames that are occurring more than one time in the runfiles sections, except for known duplicates.</p>

</dd>
<dt id="texmfdbs"><b>texmfdbs</b></dt>
<dd>

<p>Checks related to the <code>ls-R</code> files. If you have defined new trees, or changed the <code>TEXMF</code> or <code>TEXMFDBS</code> variables, it can&#39;t hurt to run this. It checks that:</p>

<dl>

<dt id="all-items-in-TEXMFDBS-have-the-prefix">- all items in <code>TEXMFDBS</code> have the <code>!!</code> prefix.</dt>
<dd>

</dd>
<dt id="all-items-in-TEXMFBDS-have-an-ls-R-file-if-they-exist-at-all">- all items in <code>TEXMFBDS</code> have an <code>ls-R</code> file (if they exist at all).</dt>
<dd>

</dd>
<dt id="all-items-in-TEXMF-with-are-listed-in-TEXMFDBS">- all items in <code>TEXMF</code> with <code>!!</code> are listed in <code>TEXMFDBS</code>.</dt>
<dd>

</dd>
<dt id="all-items-in-TEXMF-with-an-ls-R-file-are-listed-in-TEXMFDBS">- all items in <code>TEXMF</code> with an <code>ls-R</code> file are listed in <code>TEXMFDBS</code>.</dt>
<dd>

</dd>
</dl>

</dd>
</dl>

<p>Options:</p>

<dl>

<dt id="use-svn"><b>--use-svn</b></dt>
<dd>

<p>Use the output of <code>svn status</code> instead of listing the files; for checking the TL development repository. (This is run nightly.)</p>

</dd>
</dl>

<h2 id="conf">conf</h2>

<dl>

<dt id="conf-texmf-tlmgr-updmap---conffile-file---delete-key-value"><b>conf [texmf|tlmgr|updmap [--conffile <i>file</i>] [--delete] [<i>key</i> [<i>value</i>]]]</b></dt>
<dd>

</dd>
<dt id="conf-auxtrees---conffile-file-show-add-remove-value"><b>conf auxtrees [--conffile <i>file</i>] [show|add|remove] [<i>value</i>]</b></dt>
<dd>

<p>With only <code>conf</code>, show general configuration information for TeX Live, including active configuration files, path settings, and more. This is like running <code>texconfig conf</code>, but works on all supported platforms.</p>

<p>With one of <code>conf texmf</code>, <code>conf tlmgr</code>, or <code>conf updmap</code>, shows all key/value pairs (i.e., all settings) as saved in <code>ROOT/texmf.cnf</code>, the user-specific <code>tlmgr</code> configuration file (see below), or the first found (via <code>kpsewhich</code>) <code>updmap.cfg</code> file, respectively.</p>

<p>If <i>key</i> is given in addition, shows the value of only that <i>key</i> in the respective file. If option <i>--delete</i> is also given, the value in the given configuration file is entirely removed (not just commented out).</p>

<p>If <i>value</i> is given in addition, <i>key</i> is set to <i>value</i> in the respective file. <i>No error checking is done!</i></p>

<p>The <code>PATH</code> value shown by <code>conf</code> is as used by <code>tlmgr</code>. The directory in which the <code>tlmgr</code> executable is found is automatically prepended to the PATH value inherited from the environment.</p>

<p>Here is a practical example of changing configuration values. If the execution of (some or all) system commands via <code>\write18</code> was left enabled during installation, you can disable it afterwards:</p>

<pre><code>tlmgr conf texmf shell_escape 0</code></pre>

<p>The subcommand <code>auxtrees</code> allows adding and removing arbitrary additional texmf trees, completely under user control. <code>auxtrees show</code> shows the list of additional trees, <code>auxtrees add</code> <i>tree</i> adds a tree to the list, and <code>auxtrees remove</code> <i>tree</i> removes a tree from the list (if present). The trees should not contain an <code>ls-R</code> file (or files will not be found if the <code>ls-R</code> becomes stale). This works by manipulating the Kpathsea variable <code>TEXMFAUXTREES</code>, in (by default) <code>ROOT/texmf.cnf</code>. Example:</p>

<pre><code>tlmgr conf auxtrees add /quick/test/tree
tlmgr conf auxtrees remove /quick/test/tree</code></pre>

<p>In all cases the configuration file can be explicitly specified via the option <code>--conffile</code> <i>file</i>, e.g., if you don&#39;t want to change the system-wide configuration.</p>

<p>Warning: The general facility for changing configuration values is here, but tinkering with settings in this way is strongly discouraged. Again, no error checking on either keys or values is done, so any sort of breakage is possible.</p>

</dd>
</dl>

<h2 id="dump-tlpdb-option...---json">dump-tlpdb [<i>option</i>...] [--json]</h2>

<p>Dump complete local or remote TLPDB to standard output, as-is. The output is analogous to the <code>--machine-readable</code> output; see <a href="#MACHINE-READABLE-OUTPUT">&quot;MACHINE-READABLE OUTPUT&quot;</a> section.</p>

<p>Options:</p>

<dl>

<dt id="local"><b>--local</b></dt>
<dd>

<p>Dump the local TLPDB.</p>

</dd>
<dt id="remote"><b>--remote</b></dt>
<dd>

<p>Dump the remote TLPDB.</p>

</dd>
<dt id="json"><b>--json</b></dt>
<dd>

<p>Instead of dumping the actual content, the database is dumped as JSON. For the format of JSON output see <code>tlpkg/doc/JSON-formats.txt</code>, format definition <code>TLPDB</code>.</p>

</dd>
</dl>

<p>Exactly one of <code>--local</code> and <code>--remote</code> must be given.</p>

<p>In either case, the first line of the output specifies the repository location, in this format:</p>

<pre><code>&quot;location-url&quot; &quot;\t&quot; location</code></pre>

<p>where <code>location-url</code> is the literal field name, followed by a tab, and <i>location</i> is the file or url to the repository.</p>

<p>Line endings may be either LF or CRLF depending on the current platform.</p>

<h2 id="generate">generate</h2>

<dl>

<dt id="generate-option...-language"><b>generate [<i>option</i>...] language</b></dt>
<dd>

</dd>
<dt id="generate-option...-language.dat"><b>generate [<i>option</i>...] language.dat</b></dt>
<dd>

</dd>
<dt id="generate-option...-language.def"><b>generate [<i>option</i>...] language.def</b></dt>
<dd>

</dd>
<dt id="generate-option...-language.dat.lua"><b>generate [<i>option</i>...] language.dat.lua</b></dt>
<dd>

</dd>
</dl>

<p>The <code>generate</code> action overwrites any manual changes made in the respective files: it recreates them from scratch based on the information of the installed packages, plus local adaptions. The TeX Live installer and <code>tlmgr</code> routinely call <code>generate</code> for all of these files.</p>

<p>For managing your own fonts, please read the <code>updmap --help</code> information and/or <a href="https://tug.org/fonts/fontinstall.html">https://tug.org/fonts/fontinstall.html</a>.</p>

<p>For managing your own formats, please read the <code>fmtutil --help</code> information.</p>

<p>In more detail: <code>generate</code> remakes any of the configuration files <code>language.dat</code>, <code>language.def</code>, and <code>language.dat.lua</code> from the information present in the local TLPDB, plus locally-maintained files.</p>

<p>The locally-maintained files are <code>language-local.dat</code>, <code>language-local.def</code>, or <code>language-local.dat.lua</code>, searched for in <code>TEXMFLOCAL</code> in the respective directories. If local additions are present, the final file is made by starting with the main file, omitting any entries that the local file specifies to be disabled, and finally appending the local file.</p>

<p>(Historical note: The formerly supported <code>updmap-local.cfg</code> and <code>fmtutil-local.cnf</code> are no longer read, since <code>updmap</code> and <code>fmtutil</code> now reads and supports multiple configuration files. Thus, local additions can and should be put into an <code>updmap.cfg</code> of <code>fmtutil.cnf</code> file in <code>TEXMFLOCAL</code>. The <code>generate updmap</code> and <code>generate fmtutil</code> actions no longer exist.)</p>

<p>Local files specify entries to be disabled with a comment line, namely one of these:</p>

<pre><code>%!NAME
--!NAME</code></pre>

<p>where <code>language.dat</code> and <code>language.def</code> use <code>%</code>, and <code>language.dat.lua</code> use <code>--</code>. In all cases, the <i>name</i> is the respective format name or hyphenation pattern identifier. Examples:</p>

<pre><code>%!german
--!usenglishmax</code></pre>

<p>(Of course, you&#39;re not likely to actually want to disable those particular items. They&#39;re just examples.)</p>

<p>After such a disabling line, the local file can include another entry for the same item, if a different definition is desired. In general, except for the special disabling lines, the local files follow the same syntax as the master files.</p>

<p>The form <code>generate language</code> recreates all three files <code>language.dat</code>, <code>language.def</code>, and <code>language.dat.lua</code>, while the forms with an extension recreates only that given language file.</p>

<p>Options:</p>

<dl>

<dt id="dest-output_file"><b>--dest</b> <i>output_file</i></dt>
<dd>

<p>specifies the output file (defaults to the respective location in <code>TEXMFSYSVAR</code>). If <code>--dest</code> is given to <code>generate language</code>, it serves as a basename onto which <code>.dat</code> will be appended for the name of the <code>language.dat</code> output file, <code>.def</code> will be appended to the value for the name of the <code>language.def</code> output file, and <code>.dat.lua</code> to the name of the <code>language.dat.lua</code> file. (This is just to avoid overwriting; if you want a specific name for each output file, we recommend invoking <code>tlmgr</code> twice.)</p>

</dd>
<dt id="localcfg-local_conf_file"><b>--localcfg</b> <i>local_conf_file</i></dt>
<dd>

<p>specifies the (optional) local additions (defaults to the respective location in <code>TEXMFLOCAL</code>).</p>

</dd>
<dt id="rebuild-sys"><b>--rebuild-sys</b></dt>
<dd>

<p>tells <code>tlmgr</code> to run necessary programs after config files have been regenerated. These are: <code>fmtutil-sys --all</code> after <code>generate fmtutil</code>, <code>fmtutil-sys --byhyphen .../language.dat</code> after <code>generate language.dat</code>, and <code>fmtutil-sys --byhyphen .../language.def</code> after <code>generate language.def</code>.</p>

<p>These subsequent calls cause the newly-generated files to actually take effect. This is not done by default since those calls are lengthy processes and one might want to made several related changes in succession before invoking these programs.</p>

</dd>
</dl>

<p>The respective locations are as follows:</p>

<pre><code>tex/generic/config/language.dat (and language-local.dat)
tex/generic/config/language.def (and language-local.def)
tex/generic/config/language.dat.lua (and language-local.dat.lua)</code></pre>

<h2 id="gui">gui</h2>

<p>Start the graphical user interface. See <b>GUI</b> below.</p>

<h2 id="info">info</h2>

<dl>

<dt id="info-option...-pkg"><b>info [<i>option</i>...] <i>pkg</i>...</b></dt>
<dd>

</dd>
<dt id="info-option...-collections"><b>info [<i>option</i>...] collections</b></dt>
<dd>

</dd>
<dt id="info-option...-schemes"><b>info [<i>option</i>...] schemes</b></dt>
<dd>

<p>With no argument, lists all packages available at the package repository, prefixing those already installed with <code>i</code>.</p>

<p>With the single word <code>collections</code> or <code>schemes</code> as the argument, lists the request type instead of all packages.</p>

<p>With any other arguments, display information about <i>pkg</i>: the name, category, short and long description, sizes, installation status, and TeX Live revision number. If <i>pkg</i> is not locally installed, searches in the remote installation source.</p>

<p>For normal packages (not collections or schemes), the sizes of the four groups of files (run/src/doc/bin files) are shown separately. For collections, the cumulative size is shown, including all directly-dependent packages (but not dependent collections). For schemes, the cumulative size is also shown, including all directly-dependent collections and packages.</p>

<p>If <i>pkg</i> is not found locally or remotely, the search action is used and lists matching packages and files.</p>

<p>It also displays information taken from the TeX Catalogue, namely the package version, date, and license. Consider these, especially the package version, as approximations only, due to timing skew of the updates of the different pieces. By contrast, the <code>revision</code> value comes directly from TL and is reliable.</p>

<p>The former actions <code>show</code> and <code>list</code> are merged into this action, but are still supported for backward compatibility.</p>

<p>Options:</p>

<dl>

<dt id="list"><b>--list</b></dt>
<dd>

<p>If the option <code>--list</code> is given with a package, the list of contained files is also shown, including those for platform-specific dependencies. When given with schemes and collections, <code>--list</code> outputs their dependencies in a similar way.</p>

</dd>
<dt id="only-installed"><b>--only-installed</b></dt>
<dd>

<p>If this option is given, the installation source will not be used; only locally installed packages, collections, or schemes are listed.</p>

</dd>
<dt id="only-remote"><b>--only-remote</b></dt>
<dd>

<p>Only list packages from the remote repository. Useful when checking what is available in a remote repository using <code>tlmgr --repo ... --only-remote info</code>. Note that <code>--only-installed</code> and <code>--only-remote</code> cannot both be specified.</p>

</dd>
<dt id="data-item1-item2"><b>--data <code>item1,item2,...</code></b></dt>
<dd>

<p>If the option <code>--data</code> is given, its argument must be a comma or colon separated list of field names from: <code>name</code>, <code>category</code>, <code>localrev</code>, <code>remoterev</code>, <code>shortdesc</code>, <code>longdesc</code>, <code>installed</code>, <code>size</code>, <code>relocatable</code>, <code>depends</code>, <code>cat-version</code>, <code>cat-date</code>, <code>cat-license</code>, plus various <code>cat-contact-*</code> fields (see below).</p>

<p>The <code>cat-*</code> fields all come from the TeX Catalogue (<a href="https://ctan.org/pkg/catalogue">https://ctan.org/pkg/catalogue</a>). For each, there are two more variants with prefix <code>l</code> and <code>r</code>, e.g., <code>lcat-version</code> and <code>rcat-version</code>, which indicate the local and remote information, respectively. The variants without <code>l</code> and <code>r</code> show the most current one, which is normally the remote value.</p>

<p>The requested packages&#39; information is listed in CSV format, one package per line, and the column information is given by the <code>itemN</code>. The <code>depends</code> column contains the names of all the dependencies separated by <code>:</code> characters.</p>

<p>At this writing, the <code>cat-contact-*</code> fields include: <code>home</code>, <code>repository</code>, <code>support</code>, <code>bugs</code>, <code>announce</code>, <code>development</code>. Each may be empty or a url value. A brief description is on the CTAN upload page for new packages: <a href="https://ctan.org/upload">https://ctan.org/upload</a>.</p>

</dd>
<dt id="json1"><b>--json</b></dt>
<dd>

<p>In case <code>--json</code> is specified, the output is a JSON encoded array where each array element is the JSON representation of a single <code>TLPOBJ</code> but with additional information. For details see <code>tlpkg/doc/JSON-formats.txt</code>, format definition: <code>TLPOBJINFO</code>. If both <code>--json</code> and <code>--data</code> are given, <code>--json</code> takes precedence.</p>

</dd>
</dl>

</dd>
</dl>

<h2 id="init-usertree">init-usertree</h2>

<p>Sets up a texmf tree for so-called user mode management, either the default user tree (<code>TEXMFHOME</code>), or one specified on the command line with <code>--usertree</code>. See <a href="#USER-MODE">&quot;USER MODE&quot;</a> below.</p>

<h2 id="install-option...-pkg">install [<i>option</i>...] <i>pkg</i>...</h2>

<p>Install each <i>pkg</i> given on the command line, if it is not already installed. It does not touch existing packages; see the <code>update</code> action for how to get the latest version of a package.</p>

<p>By default this also installs all packages on which the given <i>pkg</i>s are dependent. Options:</p>

<dl>

<dt id="dry-run1"><b>--dry-run</b></dt>
<dd>

<p>Nothing is actually installed; instead, the actions to be performed are written to the terminal.</p>

</dd>
<dt id="file"><b>--file</b></dt>
<dd>

<p>Instead of fetching a package from the installation repository, use the package files given on the command line. These files must be standard TeX Live package files (with contained tlpobj file).</p>

</dd>
<dt id="force"><b>--force</b></dt>
<dd>

<p>If updates to <code>tlmgr</code> itself (or other parts of the basic infrastructure) are present, <code>tlmgr</code> will bail out and not perform the installation unless this option is given. Not recommended.</p>

</dd>
<dt id="no-depends"><b>--no-depends</b></dt>
<dd>

<p>Do not install dependencies. (By default, installing a package ensures that all dependencies of this package are fulfilled.)</p>

</dd>
<dt id="no-depends-at-all"><b>--no-depends-at-all</b></dt>
<dd>

<p>Normally, when you install a package which ships binary files the respective binary package will also be installed. That is, for a package <code>foo</code>, the package <code>foo.i386-linux</code> will also be installed on an <code>i386-linux</code> system. This option suppresses this behavior, and also implies <code>--no-depends</code>. Don&#39;t use it unless you are sure of what you are doing.</p>

</dd>
<dt id="reinstall"><b>--reinstall</b></dt>
<dd>

<p>Reinstall a package (including dependencies for collections) even if it already seems to be installed (i.e, is present in the TLPDB). This is useful to recover from accidental removal of files in the hierarchy.</p>

<p>When re-installing, only dependencies on normal packages are followed (i.e., not those of category Scheme or Collection).</p>

</dd>
<dt id="with-doc"><b>--with-doc</b></dt>
<dd>

</dd>
<dt id="with-src"><b>--with-src</b></dt>
<dd>

<p>While not recommended, the <code>install-tl</code> program provides an option to omit installation of all documentation and/or source files. (By default, everything is installed.) After such an installation, you may find that you want the documentation or source files for a given package after all. You can get them by using these options in conjunction with <code>--reinstall</code>, as in (using the <code>fontspec</code> package as the example):</p>

<pre><code>tlmgr install --reinstall --with-doc --with-src fontspec</code></pre>

</dd>
</dl>

<p>This action does not automatically add new symlinks in system directories; you need to run <code>tlmgr path add</code> (<a href="#path">&quot;path&quot;</a>) yourself if you are using this feature and want new symlinks added.</p>

<h2 id="key">key</h2>

<dl>

<dt id="key-list"><b>key list</b></dt>
<dd>

</dd>
<dt id="key-add-file"><b>key add <i>file</i></b></dt>
<dd>

</dd>
<dt id="key-remove-keyid"><b>key remove <i>keyid</i></b></dt>
<dd>

<p>The action <code>key</code> allows listing, adding and removing additional GPG keys to the set of trusted keys, that is, those that are used to verify the TeX Live databases.</p>

<p>With the <code>list</code> argument, <code>key</code> lists all keys.</p>

<p>The <code>add</code> argument requires another argument, either a filename or <code>-</code> for stdin, from which the key is added. The key is added to the local keyring <code>GNUPGHOME/repository-keys.gpg</code>, which is normally <code>tlpkg/gpg/repository-keys.gpg</code>.</p>

<p>The <code>remove</code> argument requires a key id and removes the requested id from the local keyring.</p>

</dd>
</dl>

<h2 id="list1">list</h2>

<p>Synonym for <a href="#info">&quot;info&quot;</a>.</p>

<h2 id="option">option</h2>

<dl>

<dt id="option---json-show"><b>option [--json] [show]</b></dt>
<dd>

</dd>
<dt id="option---json-showall-help"><b>option [--json] showall|help</b></dt>
<dd>

</dd>
<dt id="option-key-value"><b>option <i>key</i> [<i>value</i>]</b></dt>
<dd>

</dd>
</dl>

<p>The first form, <code>show</code>, shows the global TeX Live settings currently saved in the TLPDB with a short description and the <code>key</code> used for changing it in parentheses.</p>

<p>The second form, <code>showall</code>, is similar, but also shows options which can be defined but are not currently set to any value (<code>help</code> is a synonym).</p>

<p>Both <code>show...</code> forms take an option <code>--json</code>, which dumps the option information in JSON format. In this case, both forms dump the same data. For the format of the JSON output see <code>tlpkg/doc/JSON-formats.txt</code>, format definition <code>TLOPTION</code>.</p>

<p>In the third form, with <i>key</i>, if <i>value</i> is not given, the setting for <i>key</i> is displayed. If <i>value</i> is present, <i>key</i> is set to <i>value</i>.</p>

<p>Possible values for <i>key</i> are (run <code>tlmgr option showall</code> for the definitive list):</p>

<pre><code>repository (default package repository),
formats    (generate formats at installation or update time),
postcode   (run postinst code blobs)
docfiles   (install documentation files),
srcfiles   (install source files),
backupdir  (default directory for backups),
autobackup (number of backups to keep).
sys_bin    (directory to which executables are linked by the path action)
sys_man    (directory to which man pages are linked by the path action)
sys_info   (directory to which Info files are linked by the path action)
desktop_integration (Windows-only: create Start menu shortcuts)
fileassocs (Windows-only: change file associations)
multiuser  (Windows-only: install for all users)</code></pre>

<p>One common use of <code>option</code> is to permanently change the installation to get further updates from the Internet, after originally installing from DVD. To do this, you can run</p>

<pre><code>tlmgr option repository https://mirror.ctan.org/systems/texlive/tlnet</code></pre>

<p>The <code>install-tl</code> documentation has more information about the possible values for <code>repository</code>. (For backward compatibility, <code>location</code> can be used as a synonym for <code>repository</code>.)</p>

<p>If <code>formats</code> is set (this is the default), then formats are regenerated when either the engine or the format files have changed. Disable this only when you know how and want to regenerate formats yourself whenever needed (which is often, in practice).</p>

<p>The <code>postcode</code> option controls execution of per-package postinstallation action code. It is set by default, and again disabling is not likely to be of interest except to developers doing debugging.</p>

<p>The <code>docfiles</code> and <code>srcfiles</code> options control the installation of their respective file groups (documentation, sources; grouping is approximate) per package. By default both are enabled (1). Either or both can be disabled (set to 0) if disk space is limited or for minimal testing installations, etc. When disabled, the respective files are not downloaded at all.</p>

<p>The options <code>autobackup</code> and <code>backupdir</code> determine the defaults for the actions <code>update</code>, <code>backup</code> and <code>restore</code>. These three actions need a directory in which to read or write the backups. If <code>--backupdir</code> is not specified on the command line, the <code>backupdir</code> option value is used (if set). The TL installer sets <code>backupdir</code> to <code>.../tlpkg/backups</code>, under the TL root installation directory.</p>

<p>The <code>autobackup</code> option (de)activates automatic generation of backups. Its value is an integer. If the <code>autobackup</code> value is <code>-1</code>, no backups are removed. If <code>autobackup</code> is 0 or more, it specifies the number of backups to keep. Thus, backups are disabled if the value is 0. In the <code>--clean</code> mode of the <code>backup</code> action this option also specifies the number to be kept. The default value is 1, so that backups are made, but only one backup is kept.</p>

<p>To setup <code>autobackup</code> to <code>-1</code> on the command line, use:</p>

<pre><code>tlmgr option -- autobackup -1</code></pre>

<p>The <code>--</code> avoids having the <code>-1</code> treated as an option. (The <code>--</code> stops parsing for options at the point where it appears; this is a general feature across most Unix programs.)</p>

<p>The <code>sys_bin</code>, <code>sys_man</code>, and <code>sys_info</code> options are used on Unix systems to control the generation of links for executables, Info files and man pages. See the <code>path</code> action for details.</p>

<p>The last three options affect behavior on Windows installations. If <code>desktop_integration</code> is set, then some packages will install items in a sub-folder of the Start menu for <code>tlmgr gui</code>, documentation, etc. If <code>fileassocs</code> is set, Windows file associations are made (see also the <code>postaction</code> action). Finally, if <code>multiuser</code> is set, then adaptions to the registry and the menus are done for all users on the system instead of only the current user. All three options are on by default.</p>

<h2 id="paper">paper</h2>

<dl>

<dt id="paper-a4-letter"><b>paper [a4|letter]</b></dt>
<dd>

</dd>
<dt id="xdvi-pdftex-dvips-dvipdfmx-context-psutils-paper-papersize---list"><b>&lt;[xdvi|pdftex|dvips|dvipdfmx|context|psutils] paper [<i>papersize</i>|--list]</b>&gt;</dt>
<dd>

</dd>
<dt id="paper---json"><b>paper --json</b></dt>
<dd>

</dd>
</dl>

<p>With no arguments (<code>tlmgr paper</code>), shows the default paper size setting for all known programs.</p>

<p>With one argument (e.g., <code>tlmgr paper a4</code>), sets the default for all known programs to that paper size.</p>

<p>With a program given as the first argument and no paper size specified (e.g., <code>tlmgr dvips paper</code>), shows the default paper size for that program.</p>

<p>With a program given as the first argument and a paper size as the last argument (e.g., <code>tlmgr dvips paper a4</code>), set the default for that program to that paper size.</p>

<p>With a program given as the first argument and <code>--list</code> given as the last argument (e.g., <code>tlmgr dvips paper --list</code>), shows all valid paper sizes for that program. The first size shown is the default.</p>

<p>If <code>--json</code> is specified without other options, the paper setup is dumped in JSON format. For the format of JSON output see <code>tlpkg/doc/JSON-formats.txt</code>, format definition <code>TLPAPER</code>.</p>

<p>Incidentally, this syntax of having a specific program name before the <code>paper</code> keyword is unusual. It is inherited from the longstanding <code>texconfig</code> script, which supports other configuration settings for some programs, notably <code>dvips</code>. <code>tlmgr</code> does not support those extra settings.</p>

<h2 id="path">path</h2>

<dl>

<dt id="path---w32mode-user-admin-add"><b>path [--w32mode=user|admin] add</b></dt>
<dd>

</dd>
<dt id="path---w32mode-user-admin-remove"><b>path [--w32mode=user|admin] remove</b></dt>
<dd>

<p>On Unix, adds or removes symlinks for executables, man pages, and info pages in the system directories specified by the respective options (see the <a href="#option">&quot;option&quot;</a> description above). Does not change any initialization files, either system or personal. Furthermore, any executables added or removed by future updates are not taken care of automatically; this command must be rerun as needed.</p>

<p>On Windows, the registry part where the binary directory is added or removed is determined in the following way:</p>

<p>If the user has admin rights, and the option <code>--w32mode</code> is not given, the setting <i>w32_multi_user</i> determines the location (i.e., if it is on then the system path, otherwise the user path is changed).</p>

<p>If the user has admin rights, and the option <code>--w32mode</code> is given, this option determines the path to be adjusted.</p>

<p>If the user does not have admin rights, and the option <code>--w32mode</code> is not given, and the setting <i>w32_multi_user</i> is off, the user path is changed, while if the setting <i>w32_multi_user</i> is on, a warning is issued that the caller does not have enough privileges.</p>

<p>If the user does not have admin rights, and the option <code>--w32mode</code> is given, it must be <code>user</code> and the user path will be adjusted. If a user without admin rights uses the option <code>--w32mode admin</code> a warning is issued that the caller does not have enough privileges.</p>

</dd>
</dl>

<h2 id="pinning">pinning</h2>

<p>The <code>pinning</code> action manages the pinning file, see <a href="#Pinning">&quot;Pinning&quot;</a> below.</p>

<dl>

<dt id="pinning-show"><code>pinning show</code></dt>
<dd>

<p>Shows the current pinning data.</p>

</dd>
<dt id="pinning-add-repo-pkgglob"><code>pinning add</code> <i>repo</i> <i>pkgglob</i>...</dt>
<dd>

<p>Pins the packages matching the <i>pkgglob</i>(s) to the repository <i>repo</i>.</p>

</dd>
<dt id="pinning-remove-repo-pkgglob"><code>pinning remove</code> <i>repo</i> <i>pkgglob</i>...</dt>
<dd>

<p>Any packages recorded in the pinning file matching the &lt;pkgglob&gt;s for the given repository <i>repo</i> are removed.</p>

</dd>
<dt id="pinning-remove-repo---all"><code>pinning remove <i>repo</i> --all</code></dt>
<dd>

<p>Remove all pinning data for repository <i>repo</i>.</p>

</dd>
</dl>

<h2 id="platform">platform</h2>

<dl>

<dt id="platform-list-add-remove-platform"><b>platform list|add|remove <i>platform</i>...</b></dt>
<dd>

</dd>
<dt id="platform-set-platform"><b>platform set <i>platform</i></b></dt>
<dd>

</dd>
<dt id="platform-set-auto"><b>platform set auto</b></dt>
<dd>

<p><code>platform list</code> lists the TeX Live names of all the platforms (a.k.a. architectures), (<code>i386-linux</code>, ...) available at the package repository.</p>

<p><code>platform add</code> <i>platform</i>... adds the executables for each given platform <i>platform</i> to the installation from the repository.</p>

<p><code>platform remove</code> <i>platform</i>... removes the executables for each given platform <i>platform</i> from the installation, but keeps the currently running platform in any case.</p>

<p><code>platform set</code> <i>platform</i> switches TeX Live to always use the given platform instead of auto detection.</p>

<p><code>platform set auto</code> switches TeX Live to auto detection mode for platform.</p>

<p>Platform detection is needed to select the proper <code>xz</code> and <code>wget</code> binaries that are shipped with TeX Live.</p>

<p><code>arch</code> is a synonym for <code>platform</code>.</p>

<p>Options:</p>

<dl>

<dt id="dry-run2"><b>--dry-run</b></dt>
<dd>

<p>Nothing is actually installed; instead, the actions to be performed are written to the terminal.</p>

</dd>
</dl>

</dd>
</dl>

<h2 id="postaction">postaction</h2>

<dl>

<dt id="postaction-option...-install-shortcut-fileassoc-script-pkg"><b>postaction [<i>option</i>...] install [shortcut|fileassoc|script] [<i>pkg</i>...]</b></dt>
<dd>

</dd>
<dt id="postaction-option...-remove-shortcut-fileassoc-script-pkg"><b>postaction [<i>option</i>...] remove [shortcut|fileassoc|script] [<i>pkg</i>...]</b></dt>
<dd>

<p>Carry out the postaction <code>shortcut</code>, <code>fileassoc</code>, or <code>script</code> given as the second required argument in install or remove mode (which is the first required argument), for either the packages given on the command line, or for all if <code>--all</code> is given.</p>

<p>Options:</p>

<dl>

<dt id="w32mode-user-admin"><b>--w32mode=[user|admin]</b></dt>
<dd>

<p>If the option <code>--w32mode</code> is given the value <code>user</code>, all actions will only be carried out in the user-accessible parts of the registry/filesystem, while the value <code>admin</code> selects the system-wide parts of the registry for the file associations. If you do not have enough permissions, using <code>--w32mode=admin</code> will not succeed.</p>

</dd>
<dt id="fileassocmode-1-2"><b>--fileassocmode=[1|2]</b></dt>
<dd>

<p><code>--fileassocmode</code> specifies the action for file associations. If it is set to 1 (the default), only new associations are added; if it is set to 2, all associations are set to the TeX Live programs. (See also <code>option fileassocs</code>.)</p>

</dd>
<dt id="all1"><b>--all</b></dt>
<dd>

<p>Carry out the postactions for all packages</p>

</dd>
</dl>

</dd>
</dl>

<h2 id="print-platform">print-platform</h2>

<p>Print the TeX Live identifier for the detected platform (hardware/operating system) combination to standard output, and exit. <code>--print-arch</code> is a synonym.</p>

<h2 id="print-platform-info">print-platform-info</h2>

<p>Print the TeX Live platform identifier, TL platform long name, and original output from guess.</p>

<h2 id="remove-option...-pkg">remove [<i>option</i>...] <i>pkg</i>...</h2>

<p>Remove each <i>pkg</i> specified. Removing a collection removes all package dependencies (unless <code>--no-depends</code> is specified), but not any collection dependencies of that collection. However, when removing a package, dependencies are never removed. Options:</p>

<dl>

<dt id="all2"><b>--all</b></dt>
<dd>

<p>Uninstalls all of TeX Live, asking for confirmation unless <code>--force</code> is also specified.</p>

</dd>
<dt id="backup1"><b>--backup</b></dt>
<dd>

</dd>
<dt id="backupdir-directory1"><b>--backupdir</b> <i>directory</i></dt>
<dd>

<p>These options behave just as with the <a href="#update-option...-pkg">update</a> action (q.v.), except they apply to making backups of packages before they are removed. The default is to make such a backup, that is, to save a copy of packages before removal.</p>

<p>The <a href="#restore">&quot;restore&quot;</a> action explains how to restore from a backup.</p>

</dd>
<dt id="no-depends1"><b>--no-depends</b></dt>
<dd>

<p>Do not remove dependent packages.</p>

</dd>
<dt id="no-depends-at-all1"><b>--no-depends-at-all</b></dt>
<dd>

<p>See above under <a href="#install-option...-pkg">install</a> (and beware).</p>

</dd>
<dt id="force1"><b>--force</b></dt>
<dd>

<p>By default, removal of a package or collection that is a dependency of another collection or scheme is not allowed. With this option, the package will be removed unconditionally. Use with care.</p>

<p>A package that has been removed using the <code>--force</code> option because it is still listed in an installed collection or scheme will not be updated, and will be mentioned as <code>forcibly removed</code> in the output of <code>tlmgr update --list</code>.</p>

</dd>
<dt id="dry-run3"><b>--dry-run</b></dt>
<dd>

<p>Nothing is actually removed; instead, the actions to be performed are written to the terminal.</p>

</dd>
</dl>

<p>Except with <code>--all</code>, this <code>remove</code> action does not automatically remove symlinks to executables from system directories; you need to run <code>tlmgr path remove</code> (<a href="#path">&quot;path&quot;</a>) yourself if you remove an individual package with a symlink in a system directory.</p>

<h2 id="repository">repository</h2>

<dl>

<dt id="repository-list"><b>repository list</b></dt>
<dd>

</dd>
<dt id="repository-list-path-url-tag"><b>repository list <i>path|url|tag</i></b></dt>
<dd>

</dd>
<dt id="repository-add-path-tag"><b>repository add <i>path</i> [<i>tag</i>]</b></dt>
<dd>

</dd>
<dt id="repository-remove-path-tag"><b>repository remove <i>path|tag</i></b></dt>
<dd>

</dd>
<dt id="repository-set-path-tag-path-tag"><b>repository set <i>path</i>[#<i>tag</i>] [<i>path</i>[#<i>tag</i>] ...]</b></dt>
<dd>

</dd>
<dt id="repository-status"><b>repository status</b></dt>
<dd>

<p>This action manages the list of repositories. See <a href="#MULTIPLE-REPOSITORIES">&quot;MULTIPLE REPOSITORIES&quot;</a> below for detailed explanations.</p>

<p>The first form, <code>repository list</code>, lists all configured repositories and the respective tags if set. If a path, url, or tag is given after the <code>list</code> keyword, it is interpreted as the source from which to initialize a TL database and lists the contained packages. This can also be an otherwise-unused repository, either local or remote. If the option <code>--with-platforms</code> is specified in addition, for each package the available platforms (if any) are also listed.</p>

<p>The form <code>repository add</code> adds a repository (optionally attaching a tag) to the list of repositories, while <code>repository remove</code> removes a repository, either by full path/url, or by tag.</p>

<p>The form <code>repository set</code> sets the list of available repositories to the items given on the command line, overwriting previous settings.</p>

<p>The form <code>repository status</code> reports the verification status of the loaded repositories with the format of one repository per line with fields separated by a single space:</p>

<dl>

<dt id="The-tag-which-can-be-the-same-as-the-url">The tag (which can be the same as the url);</dt>
<dd>

<p>= the url;</p>

<p>= iff machine-readable output is specified, the verification code (a number);</p>

<p>= a textual description of the verification status, as the last field extending to the end of line.</p>

</dd>
</dl>

<p>That is, in normal (not machine-readable) output, the third field (numeric verification status) is not present.</p>

<p>In all cases, one of the repositories must be tagged as <code>main</code>; otherwise, all operations will fail!</p>

</dd>
</dl>

<h2 id="restore">restore</h2>

<dl>

<dt id="restore-option...-pkg-rev"><b>restore [<i>option</i>...] <i>pkg</i> [<i>rev</i>]</b></dt>
<dd>

</dd>
<dt id="restore-option...---all"><b>restore [<i>option</i>...] --all</b></dt>
<dd>

<p>Restore a package from a previously-made backup.</p>

<p>If <code>--all</code> is given, try to restore the latest revision of all package backups found in the backup directory.</p>

<p>Otherwise, if neither <i>pkg</i> nor <i>rev</i> are given, list the available backup revisions for all packages. With <i>pkg</i> given but no <i>rev</i>, list all available backup revisions of <i>pkg</i>.</p>

<p>When listing available packages, <code>tlmgr</code> shows the revision, and in parenthesis the creation time if available (in format yyyy-mm-dd hh:mm).</p>

<p>If (and only if) both <i>pkg</i> and a valid revision number <i>rev</i> are specified, try to restore the package from the specified backup.</p>

<p>Options:</p>

<dl>

<dt id="all3"><b>--all</b></dt>
<dd>

<p>Try to restore the latest revision of all package backups found in the backup directory. Additional non-option arguments (like <i>pkg</i>) are not allowed.</p>

</dd>
<dt id="backupdir-directory2"><b>--backupdir</b> <i>directory</i></dt>
<dd>

<p>Specify the directory where the backups are to be found. If not given it will be taken from the configuration setting in the TLPDB.</p>

</dd>
<dt id="dry-run4"><b>--dry-run</b></dt>
<dd>

<p>Nothing is actually restored; instead, the actions to be performed are written to the terminal.</p>

</dd>
<dt id="force2"><b>--force</b></dt>
<dd>

<p>Don&#39;t ask questions.</p>

</dd>
<dt id="json2"><b>--json</b></dt>
<dd>

<p>When listing backups, the option <code>--json</code> turn on JSON output. The format is an array of JSON objects (<code>name</code>, <code>rev</code>, <code>date</code>). For details see <code>tlpkg/doc/JSON-formats.txt</code>, format definition: <code>TLBACKUPS</code>. If both <code>--json</code> and <code>--data</code> are given, <code>--json</code> takes precedence.</p>

</dd>
</dl>

</dd>
</dl>

<h2 id="search">search</h2>

<dl>

<dt id="search-option...-what"><b>search [<i>option</i>...] <i>what</i></b></dt>
<dd>

</dd>
<dt id="search-option...---file-what"><b>search [<i>option</i>...] --file <i>what</i></b></dt>
<dd>

</dd>
<dt id="search-option...---all-what"><b>search [<i>option</i>...] --all <i>what</i></b></dt>
<dd>

<p>By default, search the names, short descriptions, and long descriptions of all locally installed packages for the argument <i>what</i>, interpreted as a (Perl) regular expression.</p>

<p>Options:</p>

<dl>

<dt id="file1"><b>--file</b></dt>
<dd>

<p>List all filenames containing <i>what</i>.</p>

</dd>
<dt id="all4"><b>--all</b></dt>
<dd>

<p>Search everything: package names, descriptions and filenames.</p>

</dd>
<dt id="global"><b>--global</b></dt>
<dd>

<p>Search the TeX Live Database of the installation medium, instead of the local installation.</p>

</dd>
<dt id="word"><b>--word</b></dt>
<dd>

<p>Restrict the search of package names and descriptions (but not filenames) to match only full words. For example, searching for <code>table</code> with this option will not output packages containing the word <code>tables</code> (unless they also contain the word <code>table</code> on its own).</p>

</dd>
</dl>

</dd>
</dl>

<h2 id="shell">shell</h2>

<p>Starts an interactive mode, where tlmgr prompts for commands. This can be used directly, or for scripting. The first line of output is <code>protocol</code> <i>n</i>, where <i>n</i> is an unsigned number identifying the protocol version (currently 1).</p>

<p>In general, tlmgr actions that can be given on the command line translate to commands in this shell mode. For example, you can say <code>update --list</code> to see what would be updated. The TLPDB is loaded the first time it is needed (not at the beginning), and used for the rest of the session.</p>

<p>Besides these actions, a few commands are specific to shell mode:</p>

<dl>

<dt id="protocol">protocol</dt>
<dd>

<p>Print <code>protocol <i>n</i></code>, the current protocol version.</p>

</dd>
<dt id="help1">help</dt>
<dd>

<p>Print pointers to this documentation.</p>

</dd>
<dt id="version1">version</dt>
<dd>

<p>Print tlmgr version information.</p>

</dd>
<dt id="quit-end-bye-byebye-EOF">quit, end, bye, byebye, EOF</dt>
<dd>

<p>Exit.</p>

</dd>
<dt id="restart">restart</dt>
<dd>

<p>Restart <code>tlmgr shell</code> with the original command line; most useful when developing <code>tlmgr</code>.</p>

</dd>
<dt id="load-local-remote">load [local|remote]</dt>
<dd>

<p>Explicitly load the local or remote, respectively, TLPDB.</p>

</dd>
<dt id="save">save</dt>
<dd>

<p>Save the local TLPDB, presumably after other operations have changed it.</p>

</dd>
<dt id="get-var-item-set-var-val">get [<i>var</i>] =item set [<i>var</i> [<i>val</i>]]</dt>
<dd>

<p>Get the value of <i>var</i>, or set it to <i>val</i>. Possible <i>var</i> names: <code>debug-translation</code>, <code>machine-readable</code>, <code>no-execute-actions</code>, <code>require-verification</code>, <code>verify-downloads</code>, <code>repository</code>, and <code>prompt</code>. All except <code>repository</code> and <code>prompt</code> are booleans, taking values 0 and 1, and behave like the corresponding command line option. The <code>repository</code> variable takes a string, and sets the remote repository location. The <code>prompt</code> variable takes a string, and sets the current default prompt.</p>

<p>If <i>var</i> or then <i>val</i> is not specified, it is prompted for.</p>

</dd>
</dl>

<h2 id="show">show</h2>

<p>Synonym for <a href="#info">&quot;info&quot;</a>.</p>

<h2 id="uninstall">uninstall</h2>

<p>Synonym for <a href="#remove-option...-pkg">remove</a>.</p>

<h2 id="update-option...-pkg">update [<i>option</i>...] [<i>pkg</i>...]</h2>

<p>Updates the packages given as arguments to the latest version available at the installation source. Either <code>--all</code> or at least one <i>pkg</i> name must be specified. Options:</p>

<dl>

<dt id="all5"><b>--all</b></dt>
<dd>

<p>Update all installed packages except for <code>tlmgr</code> itself. If updates to <code>tlmgr</code> itself are present, this gives an error, unless also the option <code>--force</code> or <code>--self</code> is given. (See below.)</p>

<p>In addition to updating the installed packages, during the update of a collection the local installation is (by default) synchronized to the status of the collection on the server, for both additions and removals.</p>

<p>This means that if a package has been removed on the server (and thus has also been removed from the respective collection), <code>tlmgr</code> will remove the package in the local installation. This is called ``auto-remove&#39;&#39; and is announced as such when using the option <code>--list</code>. This auto-removal can be suppressed using the option <code>--no-auto-remove</code> (not recommended, see option description).</p>

<p>Analogously, if a package has been added to a collection on the server that is also installed locally, it will be added to the local installation. This is called ``auto-install&#39;&#39; and is announced as such when using the option <code>--list</code>. This auto-installation can be suppressed using the option <code>--no-auto-install</code> (also not recommended).</p>

<p>An exception to the collection dependency checks (including the auto-installation of packages just mentioned) are those that have been ``forcibly removed&#39;&#39; by you, that is, you called <code>tlmgr remove --force</code> on them. (See the <code>remove</code> action documentation.) To reinstall any such forcibly removed packages use <code>--reinstall-forcibly-removed</code>.</p>

<p>To reiterate: automatic removals and additions are entirely determined by comparison of collections. Thus, if you manually install an individual package <code>foo</code> which is later removed from the server, <code>tlmgr</code> will not notice and will not remove it locally. (It has to be this way, without major rearchitecture work, because the tlpdb does not record the repository from which packages come from.)</p>

<p>If you want to exclude some packages from the current update run (e.g., due to a slow link), see the <code>--exclude</code> option below.</p>

</dd>
<dt id="self"><b>--self</b></dt>
<dd>

<p>Update <code>tlmgr</code> itself (that is, the infrastructure packages) if updates to it are present. On Windows this includes updates to the private Perl interpreter shipped inside TeX Live.</p>

<p>If this option is given together with either <code>--all</code> or a list of packages, then <code>tlmgr</code> will be updated first and, if this update succeeds, the new version will be restarted to complete the rest of the updates.</p>

<p>In short:</p>

<pre><code>tlmgr update --self        # update infrastructure only
tlmgr update --self --all  # update infrastructure and all packages
tlmgr update --force --all # update all packages but *not* infrastructure
                           # ... this last at your own risk, not recommended!</code></pre>

</dd>
<dt id="dry-run5"><b>--dry-run</b></dt>
<dd>

<p>Nothing is actually installed; instead, the actions to be performed are written to the terminal. This is a more detailed report than <code>--list</code>.</p>

</dd>
<dt id="list-pkg"><b>--list</b> [<i>pkg</i>]</dt>
<dd>

<p>Concisely list the packages which would be updated, newly installed, or removed, without actually changing anything. If <code>--all</code> is also given, all available updates are listed. If <code>--self</code> is given, but not <code>--all</code>, only updates to the critical packages (tlmgr, texlive infrastructure, perl on Windows, etc.) are listed. If neither <code>--all</code> nor <code>--self</code> is given, and in addition no <i>pkg</i> is given, then <code>--all</code> is assumed (thus, <code>tlmgr update --list</code> is the same as <code>tlmgr update --list --all</code>). If neither <code>--all</code> nor <code>--self</code> is given, but specific package names are given, those packages are checked for updates.</p>

</dd>
<dt id="exclude-pkg"><b>--exclude</b> <i>pkg</i></dt>
<dd>

<p>Exclude <i>pkg</i> from the update process. If this option is given more than once, its arguments accumulate.</p>

<p>An argument <i>pkg</i> excludes both the package <i>pkg</i> itself and all its related platform-specific packages <i>pkg.ARCH</i>. For example,</p>

<pre><code>tlmgr update --all --exclude a2ping</code></pre>

<p>will not update <code>a2ping</code>, <code>a2ping.i386-linux</code>, or any other <code>a2ping.</code><i>ARCH</i> package.</p>

<p>If this option specifies a package that would otherwise be a candidate for auto-installation, auto-removal, or reinstallation of a forcibly removed package, <code>tlmgr</code> quits with an error message. Excludes are not supported in these circumstances.</p>

<p>This option can also be set permanently in the tlmgr config file with the key <code>update-exclude</code>.</p>

</dd>
<dt id="no-auto-remove-pkg"><b>--no-auto-remove</b> [<i>pkg</i>...]</dt>
<dd>

<p>By default, <code>tlmgr</code> tries to remove packages in an existing collection which have disappeared on the server, as described above under <code>--all</code>. This option prevents such removals, either for all packages (with <code>--all</code>), or for just the given <i>pkg</i> names. This can lead to an inconsistent TeX installation, since packages are not infrequently renamed or replaced by their authors. Therefore this is not recommended.</p>

</dd>
<dt id="no-auto-install-pkg"><b>--no-auto-install</b> [<i>pkg</i>...]</dt>
<dd>

<p>Under normal circumstances <code>tlmgr</code> will install packages which are new on the server, as described above under <code>--all</code>. This option prevents any such automatic installation, either for all packages (with <code>--all</code>), or the given <i>pkg</i> names.</p>

<p>Furthermore, after the <code>tlmgr</code> run using this has finished, the packages that would have been auto-installed <i>will be considered as forcibly removed</i>. So, if <code>foobar</code> is the only new package on the server, then</p>

<pre><code>tlmgr update --all --no-auto-install</code></pre>

<p>is equivalent to</p>

<pre><code>tlmgr update --all
tlmgr remove --force foobar</code></pre>

<p>Again, since packages are sometimes renamed or replaced, using this option is not recommended.</p>

</dd>
<dt id="reinstall-forcibly-removed"><b>--reinstall-forcibly-removed</b></dt>
<dd>

<p>Under normal circumstances <code>tlmgr</code> will not install packages that have been forcibly removed by the user; that is, removed with <code>remove --force</code>, or whose installation was prohibited by <code>--no-auto-install</code> during an earlier update.</p>

<p>This option makes <code>tlmgr</code> ignore the forcible removals and re-install all such packages. This can be used to completely synchronize an installation with the server&#39;s idea of what is available:</p>

<pre><code>tlmgr update --reinstall-forcibly-removed --all</code></pre>

</dd>
<dt id="backup2"><b>--backup</b></dt>
<dd>

</dd>
<dt id="backupdir-directory3"><b>--backupdir</b> <i>directory</i></dt>
<dd>

<p>These two options control the creation of backups of packages <i>before</i> updating; that is, backing up packages as currently installed. If neither option is given, no backup will made. If <code>--backupdir</code> is given and specifies a writable directory then a backup will be made in that location. If only <code>--backup</code> is given, then a backup will be made to the directory previously set via the <a href="#option">&quot;option&quot;</a> action (see below). If both are given then a backup will be made to the specified <i>directory</i>.</p>

<p>You can also set options via the <a href="#option">&quot;option&quot;</a> action to automatically make backups for all packages, and/or keep only a certain number of backups.</p>

<p><code>tlmgr</code> always makes a temporary backup when updating packages, in case of download or other failure during an update. In contrast, the purpose of this <code>--backup</code> option is to save a persistent backup in case the actual <i>content</i> of the update causes problems, e.g., introduces an TeX incompatibility.</p>

<p>The <a href="#restore">&quot;restore&quot;</a> action explains how to restore from a backup.</p>

</dd>
<dt id="no-depends2"><b>--no-depends</b></dt>
<dd>

<p>If you call for updating a package normally all depending packages will also be checked for updates and updated if necessary. This switch suppresses this behavior.</p>

</dd>
<dt id="no-depends-at-all2"><b>--no-depends-at-all</b></dt>
<dd>

<p>See above under <a href="#install-option...-pkg">install</a> (and beware).</p>

</dd>
<dt id="force3"><b>--force</b></dt>
<dd>

<p>Force update of normal packages, without updating <code>tlmgr</code> itself (unless the <code>--self</code> option is also given). Not recommended.</p>

<p>Also, <code>update --list</code> is still performed regardless of this option.</p>

</dd>
</dl>

<p>If the package on the server is older than the package already installed (e.g., if the selected mirror is out of date), <code>tlmgr</code> does not downgrade. Also, packages for uninstalled platforms are not installed.</p>

<p><code>tlmgr</code> saves one copy of the main <code>texlive.tlpdb</code> file used for an update with a suffix representing the repository url, as in <code>tlpkg/texlive.tlpdb.main.</code><i>long-hash-string</i>. Thus, even when many mirrors are used, only one main <code>tlpdb</code> backup is kept. For non-main repositories, which do not generally have (m)any mirrors, no pruning of backups is done.</p>

<p>This action does not automatically add or remove new symlinks in system directories; you need to run <code>tlmgr</code> <a href="#path">&quot;path&quot;</a> yourself if you are using this feature and want new symlinks added.</p>

<h1 id="CONFIGURATION-FILE-FOR-TLMGR">CONFIGURATION FILE FOR TLMGR</h1>

<p><code>tlmgr</code> reads two configuration files: one is system-wide, in <code>TEXMFSYSCONFIG/tlmgr/config</code>, and the other is user-specific, in <code>TEXMFCONFIG/tlmgr/config</code>. The user-specific one is the default for the <code>conf tlmgr</code> action. (Run <code>kpsewhich -var-value=TEXMFSYSCONFIG</code> or <code>... TEXMFCONFIG ...</code> to see the actual directory names.)</p>

<p>A few defaults corresponding to command-line options can be set in these configuration files. In addition, the system-wide file can contain a directive to restrict the allowed actions.</p>

<p>In these config files, empty lines and lines starting with # are ignored. All other lines must look like:</p>

<pre><code>key = value</code></pre>

<p>where the spaces are optional but the <code>=</code> is required.</p>

<p>The allowed keys are:</p>

<dl>

<dt id="auto-remove-0-or-1-default-1-same-as-command-line-option"><code>auto-remove =</code> 0 or 1 (default 1), same as command-line option.</dt>
<dd>

</dd>
<dt id="gui-expertmode-0-or-1-default-1-.-This-switches-between-the-full-GUI-and-a-simplified-GUI-with-only-the-most-common-settings"><code>gui-expertmode =</code> 0 or 1 (default 1). This switches between the full GUI and a simplified GUI with only the most common settings.</dt>
<dd>

</dd>
<dt id="gui-lang-llcode-with-a-language-code-value-as-with-the-command-line-option"><code>gui-lang =</code> <i>llcode</i>, with a language code value as with the command-line option.</dt>
<dd>

</dd>
<dt id="no-checksums-0-or-1-default-0-see-below"><code>no-checksums =</code> 0 or 1 (default 0, see below).</dt>
<dd>

</dd>
<dt id="persistent-downloads-0-or-1-default-1-same-as-command-line-option"><code>persistent-downloads =</code> 0 or 1 (default 1), same as command-line option.</dt>
<dd>

</dd>
<dt id="require-verification-0-or-1-default-0-same-as-command-line-option"><code>require-verification =</code> 0 or 1 (default 0), same as command-line option.</dt>
<dd>

</dd>
<dt id="tkfontscale-floating-point-number-default-1.0-scaling-factor-for-fonts-in-the-Tk-based-frontends"><code>tkfontscale =</code> <i>floating-point number</i> (default 1.0); scaling factor for fonts in the Tk-based frontends.</dt>
<dd>

</dd>
<dt id="update-exclude-comma-separated-list-of-packages-no-spaces-allowed-.-Same-as-the-command-line-option---exclude-for-the-update-action"><code>update-exclude =</code> <i>comma-separated list of packages</i> (no spaces allowed). Same as the command line option <code>--exclude</code> for the <code>update</code> action.</dt>
<dd>

</dd>
<dt id="verify-downloads-0-or-1-default-1-same-as-command-line-option"><code>verify-downloads =</code> 0 or 1 (default 1), same as command-line option.</dt>
<dd>

</dd>
</dl>

<p>The system-wide config file can contain one additional key:</p>

<dl>

<dt id="allowed-actions-action1-action2-...-The-value-is-a-comma-separated-list-no-spaces-of-tlmgr-actions-which-are-allowed-to-be-executed-when-tlmgr-is-invoked-in-system-mode-that-is-without---usermode-.-This-allows-distributors-to-include-tlmgr-in-their-packaging-but-allow-only-a-restricted-set-of-actions-that-do-not-interfere-with-their-distro-package-manager.-For-native-TeX-Live-installations-it-doesnt-make-sense-to-set-this"><code>allowed-actions =</code> <i>action1</i>[,<i>action2</i>,...] The value is a comma-separated list (no spaces) of <code>tlmgr</code> actions which are allowed to be executed when <code>tlmgr</code> is invoked in system mode (that is, without <code>--usermode</code>). This allows distributors to include <code>tlmgr</code> in their packaging, but allow only a restricted set of actions that do not interfere with their distro package manager. For native TeX Live installations, it doesn&#39;t make sense to set this.</dt>
<dd>

</dd>
</dl>

<p>Finally, the <code>no-checksums</code> key needs more explanation. By default, package checksums computed and stored on the server (in the TLPDB) are compared to checksums computed locally after downloading. <code>no-checksums</code> disables this process. The checksum algorithm is SHA-512. Your system must have one of (looked for in this order) the Perl <code>Digest::SHA</code> module, the <code>openssl</code> program (<a href="https://openssl.org">https://openssl.org</a>), the <code>sha512sum</code> program (from GNU Coreutils, <a href="https://www.gnu.org/software/coreutils">https://www.gnu.org/software/coreutils</a>), or finally the <code>shasum</code> program (just to support old Macs). If none of these are available, a warning is issued and <code>tlmgr</code> proceeds without checking checksums. <code>no-checksums</code> avoids the warning. (Incidentally, other SHA implementations, such as the pure Perl and pure Lua modules, are much too slow to be usable in our context.)</p>

<h1 id="CRYPTOGRAPHIC-VERIFICATION">CRYPTOGRAPHIC VERIFICATION</h1>

<p><code>tlmgr</code> and <code>install-tl</code> perform cryptographic verification if possible. If verification is performed and successful, the programs report <code>(verified)</code> after loading the TLPDB; otherwise, they report <code>(not verified)</code>. But either way, by default the installation and/or updates proceed normally.</p>

<p>If a program named <code>gpg</code> is available (that is, found in <code>PATH</code>), by default cryptographic signatures will be checked: we require the main repository be signed, but not any additional repositories. If <code>gpg</code> is not available, by default signatures are not checked and no verification is carried out, but <code>tlmgr</code> still proceeds normally.</p>

<p>The behavior of the verification can be controlled by the command line and config file option <code>verify-repo</code> which takes one of the following values: <code>none</code>, <code>main</code>, or <code>all</code>. With <code>none</code>, no verification whatsoever is attempted. With <code>main</code> (the default) verification is required only for the main repository, and only if <code>gpg</code> is available; though attempted for all, missing signatures of subsidiary repositories will not result in an error. Finally, in the case of <code>all</code>, <code>gpg</code> must be available and all repositories need to be signed.</p>

<p>In all cases, if a signature is checked and fails to verify, an error is raised.</p>

<p>Cryptographic verification requires checksum checking (described just above) to succeed, and a working GnuPG (<code>gpg</code>) program (see below for search method). Then, unless cryptographic verification has been disabled, a signature file (<code>texlive.tlpdb.*.asc</code>) of the checksum file is downloaded and the signature verified. The signature is created by the TeX Live Distribution GPG key 0x0D5E5D9106BAB6BC, which in turn is signed by Karl Berry&#39;s key 0x0716748A30D155AD and Norbert Preining&#39;s key 0x6CACA448860CDC13. All of these keys are obtainable from the standard key servers.</p>

<p>Additional trusted keys can be added using the <code>key</code> action.</p>

<h2 id="Configuration-of-GnuPG-invocation">Configuration of GnuPG invocation</h2>

<p>The executable used for GnuPG is searched as follows: If the environment variable <code>TL_GNUPG</code> is set, it is tested and used; otherwise <code>gpg</code> is checked; finally <code>gpg2</code> is checked.</p>

<p>Further adaptation of the <code>gpg</code> invocation can be made using the two environment variables <code>TL_GNUPGHOME</code>, which is passed to <code>gpg</code> as the value for <code>--homedir</code>, and <code>TL_GNUPGARGS</code>, which replaces the default options <code>--no-secmem-warning --no-permission-warning</code>.</p>

<h1 id="USER-MODE">USER MODE</h1>

<p><code>tlmgr</code> provides a restricted way, called ``user mode&#39;&#39;, to manage arbitrary texmf trees in the same way as the main installation. For example, this allows people without write permissions on the installation location to update/install packages into a tree of their own.</p>

<p><code>tlmgr</code> is switched into user mode with the command line option <code>--usermode</code>. It does not switch automatically, nor is there any configuration file setting for it. Thus, this option has to be explicitly given every time user mode is to be activated.</p>

<p>This mode of <code>tlmgr</code> works on a user tree, by default the value of the <code>TEXMFHOME</code> variable. This can be overridden with the command line option <code>--usertree</code>. In the following when we speak of the user tree we mean either <code>TEXMFHOME</code> or the one given on the command line.</p>

<p>Not all actions are allowed in user mode; <code>tlmgr</code> will warn you and not carry out any problematic actions. Currently not supported (and probably will never be) is the <code>platform</code> action. The <code>gui</code> action is currently not supported, but may be in a future release.</p>

<p>Some <code>tlmgr</code> actions don&#39;t need any write permissions and thus work the same in user mode and normal mode. Currently these are: <code>check</code>, <code>help</code>, <code>list</code>, <code>print-platform</code>, <code>print-platform-info</code>, <code>search</code>, <code>show</code>, <code>version</code>.</p>

<p>On the other hand, most of the actions dealing with package management do need write permissions, and thus behave differently in user mode, as described below: <code>install</code>, <code>update</code>, <code>remove</code>, <code>option</code>, <code>paper</code>, <code>generate</code>, <code>backup</code>, <code>restore</code>, <code>uninstall</code>, <code>symlinks</code>.</p>

<p>Before using <code>tlmgr</code> in user mode, you have to set up the user tree with the <code>init-usertree</code> action. This creates <i>usertree</i><code>/web2c</code> and <i>usertree</i><code>/tlpkg/tlpobj</code>, and a minimal <i>usertree</i><code>/tlpkg/texlive.tlpdb</code>. At that point, you can tell <code>tlmgr</code> to do the (supported) actions by adding the <code>--usermode</code> command line option.</p>

<p>In user mode the file <i>usertree</i><code>/tlpkg/texlive.tlpdb</code> contains only the packages that have been installed into the user tree using <code>tlmgr</code>, plus additional options from the ``virtual&#39;&#39; package <code>00texlive.installation</code> (similar to the main installation&#39;s <code>texlive.tlpdb</code>).</p>

<p>All actions on packages in user mode can only be carried out on packages that are known as <code>relocatable</code>. This excludes all packages containing executables and a few other core packages. Of the 2500 or so packages currently in TeX Live the vast majority are relocatable and can be installed into a user tree.</p>

<p>Description of changes of actions in user mode:</p>

<h2 id="User-mode-install">User mode install</h2>

<p>In user mode, the <code>install</code> action checks that the package and all dependencies are all either relocated or already installed in the system installation. If this is the case, it unpacks all containers to be installed into the user tree (to repeat, that&#39;s either <code>TEXMFHOME</code> or the value of <code>--usertree</code>) and add the respective packages to the user tree&#39;s <code>texlive.tlpdb</code> (creating it if need be).</p>

<p>Currently installing a collection in user mode installs all dependent packages, but in contrast to normal mode, does <i>not</i> install dependent collections. For example, in normal mode <code>tlmgr install collection-context</code> would install <code>collection-basic</code> and other collections, while in user mode, <i>only</i> the packages mentioned in <code>collection-context</code> are installed.</p>

<p>If a package shipping map files is installed in user mode, a backup of the user&#39;s <code>updmap.cfg</code> in <code>USERTREE/web2c/</code> is made, and then this file regenerated from the list of installed packages.</p>

<h2 id="User-mode-backup-restore-remove-update">User mode backup, restore, remove, update</h2>

<p>In user mode, these actions check that all packages to be acted on are installed in the user tree before proceeding; otherwise, they behave just as in normal mode.</p>

<h2 id="User-mode-generate-option-paper">User mode generate, option, paper</h2>

<p>In user mode, these actions operate only on the user tree&#39;s configuration files and/or <code>texlive.tlpdb</code>.</p>

<h1 id="MULTIPLE-REPOSITORIES">MULTIPLE REPOSITORIES</h1>

<p>The main TeX Live repository contains a vast array of packages. Nevertheless, additional local repositories can be useful to provide locally-installed resources, such as proprietary fonts and house styles. Also, alternative package repositories distribute packages that cannot or should not be included in TeX Live, for whatever reason.</p>

<p>The simplest and most reliable method is to temporarily set the installation source to any repository (with the <code>-repository</code> or <code>option repository</code> command line options), and perform your operations.</p>

<p>When you are using multiple repositories over a sustained length of time, however, explicitly switching between them becomes inconvenient. Thus, it&#39;s possible to tell <code>tlmgr</code> about additional repositories you want to use. The basic command is <code>tlmgr repository add</code>. The rest of this section explains further.</p>

<p>When using multiple repositories, one of them has to be set as the main repository, which distributes most of the installed packages. When you switch from a single repository installation to a multiple repository installation, the previous sole repository will be set as the main repository.</p>

<p>By default, even if multiple repositories are configured, packages are <i>still</i> <i>only</i> installed from the main repository. Thus, simply adding a second repository does not actually enable installation of anything from there. You also have to specify which packages should be taken from the new repository, by specifying so-called ``pinning&#39;&#39; rules, described next.</p>

<h2 id="Pinning">Pinning</h2>

<p>When a package <code>foo</code> is pinned to a repository, a package <code>foo</code> in any other repository, even if it has a higher revision number, will not be considered an installable candidate.</p>

<p>As mentioned above, by default everything is pinned to the main repository. Let&#39;s now go through an example of setting up a second repository and enabling updates of a package from it.</p>

<p>First, check that we have support for multiple repositories, and have only one enabled (as is the case by default):</p>

<pre><code>$ tlmgr repository list
List of repositories (with tags if set):
  /var/www/norbert/tlnet</code></pre>

<p>Ok. Let&#39;s add the <code>tlcontrib</code> repository (this is a real repository hosted at <a href="http://contrib.texlive.info">http://contrib.texlive.info</a>) with the tag <code>tlcontrib</code>:</p>

<pre><code>$ tlmgr repository add http://contrib.texlive.info/current tlcontrib</code></pre>

<p>Check the repository list again:</p>

<pre><code>$ tlmgr repository list
List of repositories (with tags if set):
   http://contrib.texlive.info/current (tlcontrib)
   /var/www/norbert/tlnet (main)</code></pre>

<p>Now we specify a pinning entry to get the package <code>classico</code> from <code>tlcontrib</code>:</p>

<pre><code>$ tlmgr pinning add tlcontrib classico</code></pre>

<p>Check that we can find <code>classico</code>:</p>

<pre><code>$ tlmgr show classico
package:     classico
...
shortdesc:   URW Classico fonts
...</code></pre>

<p>- install <code>classico</code>:</p>

<pre><code>$ tlmgr install classico
tlmgr: package repositories:
...
[1/1,  ??:??/??:??] install: classico @tlcontrib [737k]</code></pre>

<p>In the output here you can see that the <code>classico</code> package has been installed from the <code>tlcontrib</code> repository (<code>@tlcontrib</code>).</p>

<p>Finally, <code>tlmgr pinning</code> also supports removing certain or all packages from a given repository:</p>

<pre><code>$ tlmgr pinning remove tlcontrib classico # remove just classico
$ tlmgr pinning remove tlcontrib --all    # take nothing from tlcontrib</code></pre>

<p>A summary of <code>tlmgr pinning</code> actions is given above.</p>

<h1 id="GUI-FOR-TLMGR">GUI FOR TLMGR</h1>

<p>The graphical user interface for <code>tlmgr</code> requires Perl/Tk <a href="https://search.cpan.org/search?query=perl%2Ftk">https://search.cpan.org/search?query=perl%2Ftk</a>. For Unix-based systems Perl/Tk (as well as Perl of course) has to be installed outside of TL. <a href="https://tug.org/texlive/distro.html#perltk">https://tug.org/texlive/distro.html#perltk</a> has a list of invocations for some distros. For Windows the necessary modules are no longer shipped within TeX Live, so you&#39;ll have to have an external Perl available that includes them.</p>

<p>We are talking here about the GUI built into tlmgr itself, not about the other tlmgr GUIs, which are: tlshell (Tcl/Tk-based), tlcockpit (Java-based) and, only on Macs, TeX Live Utility. These are invoked as separate programs.</p>

<p>The GUI mode of tlmgr is started with the invocation <code>tlmgr gui</code>; assuming Tk is loadable, the graphical user interface will be shown. The main window contains a menu bar, the main display, and a status area where messages normally shown on the console are displayed.</p>

<p>Within the main display there are three main parts: the <code>Display configuration</code> area, the list of packages, and the action buttons.</p>

<p>Also, at the top right the currently loaded repository is shown; this also acts as a button and when clicked will try to load the default repository. To load a different repository, see the <code>tlmgr</code> menu item.</p>

<p>Finally, the status area at the bottom of the window gives additional information about what is going on.</p>

<h2 id="Main-display">Main display</h2>

<h3 id="Display-configuration-area">Display configuration area</h3>

<p>The first part of the main display allows you to specify (filter) which packages are shown. By default, all are shown. Changes here are reflected right away.</p>

<dl>

<dt id="Status">Status</dt>
<dd>

<p>Select whether to show all packages (the default), only those installed, only those <i>not</i> installed, or only those with update available.</p>

</dd>
<dt id="Category">Category</dt>
<dd>

<p>Select which categories are shown: packages, collections, and/or schemes. These are briefly explained in the <a href="#DESCRIPTION">&quot;DESCRIPTION&quot;</a> section above.</p>

</dd>
<dt id="Match">Match</dt>
<dd>

<p>Select packages matching for a specific pattern. By default, this searches both descriptions and filenames. You can also select a subset for searching.</p>

</dd>
<dt id="Selection">Selection</dt>
<dd>

<p>Select packages to those selected, those not selected, or all. Here, ``selected&#39;&#39; means that the checkbox in the beginning of the line of a package is ticked.</p>

</dd>
<dt id="Display-configuration-buttons">Display configuration buttons</dt>
<dd>

<p>To the right there are three buttons: select all packages, select none (a.k.a. deselect all), and reset all these filters to the defaults, i.e., show all available.</p>

</dd>
</dl>

<h3 id="Package-list-area">Package list area</h3>

<p>The second are of the main display lists all installed packages. If a repository is loaded, those that are available but not installed are also listed.</p>

<p>Double clicking on a package line pops up an informational window with further details: the long description, included files, etc.</p>

<p>Each line of the package list consists of the following items:</p>

<dl>

<dt id="a-checkbox">a checkbox</dt>
<dd>

<p>Used to select particular packages; some of the action buttons (see below) work only on the selected packages.</p>

</dd>
<dt id="package-name">package name</dt>
<dd>

<p>The name (identifier) of the package as given in the database.</p>

</dd>
<dt id="local-revision-and-version">local revision (and version)</dt>
<dd>

<p>If the package is installed the TeX Live revision number for the installed package will be shown. If there is a catalogue version given in the database for this package, it will be shown in parentheses. However, the catalogue version, unlike the TL revision, is not guaranteed to reflect what is actually installed.</p>

</dd>
<dt id="remote-revision-and-version">remote revision (and version)</dt>
<dd>

<p>If a repository has been loaded the revision of the package in the repository (if present) is shown. As with the local column, if a catalogue version is provided it will be displayed. And also as with the local column, the catalogue version may be stale.</p>

</dd>
<dt id="short-description">short description</dt>
<dd>

<p>The short description of the package.</p>

</dd>
</dl>

<h3 id="Main-display-action-buttons">Main display action buttons</h3>

<p>Below the list of packages are several buttons:</p>

<dl>

<dt id="Update-all-installed">Update all installed</dt>
<dd>

<p>This calls <code>tlmgr update --all</code>, i.e., tries to update all available packages. Below this button is a toggle to allow reinstallation of previously removed packages as part of this action.</p>

<p>The other four buttons only work on the selected packages, i.e., those where the checkbox at the beginning of the package line is ticked.</p>

</dd>
<dt id="Update">Update</dt>
<dd>

<p>Update only the selected packages.</p>

</dd>
<dt id="Install">Install</dt>
<dd>

<p>Install the selected packages; acts like <code>tlmgr install</code>, i.e., also installs dependencies. Thus, installing a collection installs all its constituent packages.</p>

</dd>
<dt id="Remove">Remove</dt>
<dd>

<p>Removes the selected packages; acts like <code>tlmgr remove</code>, i.e., it will also remove dependencies of collections (but not dependencies of normal packages).</p>

</dd>
<dt id="Backup">Backup</dt>
<dd>

<p>Makes a backup of the selected packages; acts like <code>tlmgr backup</code>. This action needs the option <code>backupdir</code> set (see <code>Options -</code> General&gt;).</p>

</dd>
</dl>

<h2 id="Menu-bar">Menu bar</h2>

<p>The following entries can be found in the menu bar:</p>

<dl>

<dt id="tlmgr-menu"><code>tlmgr</code> menu</dt>
<dd>

<p>The items here load various repositories: the default as specified in the TeX Live database, the default network repository, the repository specified on the command line (if any), and an arbitrarily manually-entered one. Also has the so-necessary <code>quit</code> operation.</p>

</dd>
<dt id="Options-menu"><code>Options menu</code></dt>
<dd>

<p>Provides access to several groups of options: <code>Paper</code> (configuration of default paper sizes), <code>Platforms</code> (only on Unix, configuration of the supported/installed platforms), <code>GUI Language</code> (select language used in the GUI interface), and <code>General</code> (everything else).</p>

<p>Several toggles are also here. The first is <code>Expert options</code>, which is set by default. If you turn this off, the next time you start the GUI a simplified screen will be shown that display only the most important functionality. This setting is saved in the configuration file of <code>tlmgr</code>; see <a href="#CONFIGURATION-FILE-FOR-TLMGR">&quot;CONFIGURATION FILE FOR TLMGR&quot;</a> for details.</p>

<p>The other toggles are all off by default: for debugging output, to disable the automatic installation of new packages, and to disable the automatic removal of packages deleted from the server. Playing with the choices of what is or isn&#39;t installed may lead to an inconsistent TeX Live installation; e.g., when a package is renamed.</p>

</dd>
<dt id="Actions-menu"><code>Actions menu</code></dt>
<dd>

<p>Provides access to several actions: update the filename database (aka <code>ls-R</code>, <code>mktexlsr</code>, <code>texhash</code>), rebuild all formats (<code>fmtutil-sys --all</code>), update the font map database (<code>updmap-sys</code>), restore from a backup of a package, and use of symbolic links in system directories (not on Windows).</p>

<p>The final action is to remove the entire TeX Live installation (also not on Windows).</p>

</dd>
<dt id="Help-menu"><code>Help menu</code></dt>
<dd>

<p>Provides access to the TeX Live manual (also on the web at <a href="https://tug.org/texlive/doc.html">https://tug.org/texlive/doc.html</a>) and the usual ``About&#39;&#39; box.</p>

</dd>
</dl>

<h2 id="GUI-options">GUI options</h2>

<p>Some generic Perl/Tk options can be specified with <code>tlmgr gui</code> to control the display:</p>

<dl>

<dt id="background-color"><code>-background</code> <i>color</i></dt>
<dd>

<p>Set background color.</p>

</dd>
<dt id="font-fontname-fontsize"><code>-font &quot;</code> <i>fontname</i> <i>fontsize</i> <code>&quot;</code></dt>
<dd>

<p>Set font, e.g., <code>tlmgr gui -font &quot;helvetica 18&quot;</code>. The argument to <code>-font</code> must be quoted, i.e., passed as a single string.</p>

</dd>
<dt id="foreground-color"><code>-foreground</code> <i>color</i></dt>
<dd>

<p>Set foreground color.</p>

</dd>
<dt id="geometry-geomspec"><code>-geometry</code> <i>geomspec</i></dt>
<dd>

<p>Set the X geometry, e.g., <code>tlmgr gui -geometry 1024x512-0+0</code> creates the window of (approximately) the given size in the upper-right corner of the display.</p>

</dd>
<dt id="xrm-xresource"><code>-xrm</code> <i>xresource</i></dt>
<dd>

<p>Pass the arbitrary X resource string <i>xresource</i>.</p>

</dd>
</dl>

<p>A few other obscure options are recognized but not mentioned here. See the Perl/Tk documentation (<a href="https://search.cpan.org/perldoc?Tk">https://search.cpan.org/perldoc?Tk</a>) for the complete list, and any X documentation for general information.</p>

<h1 id="MACHINE-READABLE-OUTPUT">MACHINE-READABLE OUTPUT</h1>

<p>With the <code>--machine-readable</code> option, <code>tlmgr</code> writes to stdout in the fixed line-oriented format described here, and the usual informational messages for human consumption are written to stderr (normally they are written to stdout). The idea is that a program can get all the information it needs by reading stdout.</p>

<p>Currently this option only applies to the <a href="#update-option...-pkg">update</a>, <a href="#install-option...-pkg">install</a>, and <a href="#option">&quot;option&quot;</a> actions.</p>

<h2 id="Machine-readable-update-and-install-output">Machine-readable <code>update</code> and <code>install</code> output</h2>

<p>The output format is as follows:</p>

<pre><code>fieldname &quot;\t&quot; value
...
&quot;end-of-header&quot;
pkgname status localrev serverrev size runtime esttot
...
&quot;end-of-updates&quot;
other output from post actions, not in machine readable form</code></pre>

<p>The header section currently has two fields: <code>location-url</code> (the repository source from which updates are being drawn), and <code>total-bytes</code> (the total number of bytes to be downloaded).</p>

<p>The <i>localrev</i> and <i>serverrev</i> fields for each package are the revision numbers in the local installation and server repository, respectively. The <i>size</i> field is the number of bytes to be downloaded, i.e., the size of the compressed tar file for a network installation, not the unpacked size. The runtime and esttot fields are only present for updated and auto-install packages, and contain the currently passed time since start of installation/updates and the estimated total time.</p>

<p>Line endings may be either LF or CRLF depending on the current platform.</p>

<dl>

<dt id="location-url-location"><code>location-url</code> <i>location</i></dt>
<dd>

<p>The <i>location</i> may be a url (including <code>file:///foo/bar/...</code>), or a directory name (<code>/foo/bar</code>). It is the package repository from which the new package information was drawn.</p>

</dd>
<dt id="total-bytes-count"><code>total-bytes</code> <i>count</i></dt>
<dd>

<p>The <i>count</i> is simply a decimal number, the sum of the sizes of all the packages that need updating or installing (which are listed subsequently).</p>

</dd>
</dl>

<p>Then comes a line with only the literal string <code>end-of-header</code>.</p>

<p>Each following line until a line with literal string <code>end-of-updates</code> reports on one package. The fields on each line are separated by a tab. Here are the fields.</p>

<dl>

<dt id="pkgname"><i>pkgname</i></dt>
<dd>

<p>The TeX Live package identifier, with a possible platform suffix for executables. For instance, <code>pdftex</code> and <code>pdftex.i386-linux</code> are given as two separate packages, one on each line.</p>

</dd>
<dt id="status"><i>status</i></dt>
<dd>

<p>The status of the package update. One character, as follows:</p>

<dl>

<dt id="d"><code>d</code></dt>
<dd>

<p>The package was removed on the server.</p>

</dd>
<dt id="f"><code>f</code></dt>
<dd>

<p>The package was removed in the local installation, even though a collection depended on it. (E.g., the user ran <code>tlmgr remove --force</code>.)</p>

</dd>
<dt id="u"><code>u</code></dt>
<dd>

<p>Normal update is needed.</p>

</dd>
<dt id="r"><code>r</code></dt>
<dd>

<p>Reversed non-update: the locally-installed version is newer than the version on the server.</p>

</dd>
<dt id="a"><code>a</code></dt>
<dd>

<p>Automatically-determined need for installation, the package is new on the server and is (most probably) part of an installed collection.</p>

</dd>
<dt id="i"><code>i</code></dt>
<dd>

<p>Package will be installed and isn&#39;t present in the local installation (action install).</p>

</dd>
<dt id="I"><code>I</code></dt>
<dd>

<p>Package is already present but will be reinstalled (action install).</p>

</dd>
</dl>

</dd>
<dt id="localrev"><i>localrev</i></dt>
<dd>

<p>The revision number of the installed package, or <code>-</code> if it is not present locally.</p>

</dd>
<dt id="serverrev"><i>serverrev</i></dt>
<dd>

<p>The revision number of the package on the server, or <code>-</code> if it is not present on the server.</p>

</dd>
<dt id="size"><i>size</i></dt>
<dd>

<p>The size in bytes of the package on the server. The sum of all the package sizes is given in the <code>total-bytes</code> header field mentioned above.</p>

</dd>
<dt id="runtime"><i>runtime</i></dt>
<dd>

<p>The run time since start of installations or updates.</p>

</dd>
<dt id="esttot"><i>esttot</i></dt>
<dd>

<p>The estimated total time.</p>

</dd>
</dl>

<h2 id="Machine-readable-option-output">Machine-readable <code>option</code> output</h2>

<p>The output format is as follows:</p>

<pre><code>key &quot;\t&quot; value</code></pre>

<p>If a value is not saved in the database the string <code>(not set)</code> is shown.</p>

<p>If you are developing a program that uses this output, and find that changes would be helpful, do not hesitate to write the mailing list.</p>

<h1 id="ENVIRONMENT-VARIABLES">ENVIRONMENT VARIABLES</h1>

<p><code>tlmgr</code> uses many of the standard TeX environment variables, as reported by, e.g., <code>tlmgr conf</code> (<a href="#conf">&quot;conf&quot;</a>).</p>

<p>In addition, for ease in scripting and debugging, <code>tlmgr</code> looks for the following environment variables. These are not of interest for normal user installations.</p>

<dl>

<dt id="TEXLIVE_COMPRESSOR"><code>TEXLIVE_COMPRESSOR</code></dt>
<dd>

<p>This variable allows selecting a different compressor program for backups and intermediate rollback containers. The order of selection is:</p>

<ol>

<li><p>If the environment variable <code>TEXLIVE_COMPRESSOR</code> is defined, use it; abort if it doesn&#39;t work. Possible values: <code>lz4</code>, <code>gzip</code>, <code>xz</code>. The necessary options are added internally.</p>

</li>
<li><p>If lz4 is available (either from the system or TL) and working, use that.</p>

</li>
<li><p>If gzip is available (from the system) and working, use that.</p>

</li>
<li><p>If xz is available (either from the system or TL) and working, use that.</p>

</li>
</ol>

<p>lz4 and gzip are faster in creating tlmgr&#39;s local backups, hence they are preferred. The unconditional use of xz for the tlnet containers is unaffected, to minimize download sizes.</p>

</dd>
<dt id="TEXLIVE_DOWNLOADER"><code>TEXLIVE_DOWNLOADER</code></dt>
<dd>

</dd>
<dt id="TL_DOWNLOAD_PROGRAM"><code>TL_DOWNLOAD_PROGRAM</code></dt>
<dd>

</dd>
<dt id="TL_DOWNLOAD_ARGS"><code>TL_DOWNLOAD_ARGS</code></dt>
<dd>

<p>These options allow selecting different download programs then the ones automatically selected by the installer. The order of selection is:</p>

<ol>

<li><p>If the environment variable <code>TEXLIVE_DOWNLOADER</code> is defined, use it; abort if the specified program doesn&#39;t work. Possible values: <code>lwp</code>, <code>curl</code>, <code>wget</code>. The necessary options are added internally.</p>

</li>
<li><p>If the environment variable <code>TL_DOWNLOAD_PROGRAM</code> is defined (can be any value), use it together with <code>TL_DOWNLOAD_ARGS</code>; abort if it doesn&#39;t work.</p>

</li>
<li><p>If LWP is available and working, use that (by far the most efficient method, as it supports persistent downloads).</p>

</li>
<li><p>If curl is available (from the system) and working, use that.</p>

</li>
<li><p>If wget is available (either from the system or TL) and working, use that.</p>

</li>
</ol>

<p>TL provides <code>wget</code> binaries for platforms where necessary, so some download method should always be available.</p>

</dd>
<dt id="TEXLIVE_PREFER_OWN"><code>TEXLIVE_PREFER_OWN</code></dt>
<dd>

<p>By default, compression and download programs provided by the system, i.e., found along <code>PATH</code> are preferred over those shipped with TeX Live.</p>

<p>This can create problems with systems that are too old, and so can be overridden by setting the environment variable <code>TEXLIVE_PREFER_OWN</code> to 1. In this case, executables shipped with TL will be preferred.</p>

<p>Extra compression/download programs not provided by TL, such as gzip, lwp, and curl, are still checked for on the system and used if available, per the above. <code>TEXLIVE_PREFER_OWN</code> only applies when the program being checked for is shipped with TL, namely the lz4 and xz compressors and wget downloader.</p>

<p>Exception: on Windows, the <code>tar.exe</code> shipped with TL is always used, regardless of any setting.</p>

</dd>
</dl>

<h1 id="AUTHORS-AND-COPYRIGHT">AUTHORS AND COPYRIGHT</h1>

<p>This script and its documentation were written for the TeX Live distribution (<a href="https://tug.org/texlive">https://tug.org/texlive</a>) and both are licensed under the GNU General Public License Version 2 or later.</p>

<p>$Id: tlmgr.pl 61236 2021-12-06 22:13:25Z karl $</p>


</body>

</html>


